# Теоретическая часть контрольной работы. Вариант 6
## Разработка на Python. Основной

### Вопрос 1
После ревью тебе нужно влить ветку `feature/inventory` в `main`, но ревьюер просит сохранить линейную историю. Какой способ слияния ты выберешь?

А) Fast-forward merge после обновления ветки через rebase  
Б) Merge с merge-коммитом  
В) Squash-merge без проверки  
Г) Перезапись истории `main` через `git push --force`

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как структурировать процесс разработки с помощью Git: зачем нужны ветки, почему важна история коммитов и как правильно использовать rebase для упорядочивания истории изменений (*).

### Вопрос 2
Как посмотреть список удалённых веток, доступных по SSH?

**Правильный ответ:** `git branch -r`

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 3
Перед релизом ты хочешь временно убрать незавершённые изменения из рабочей директории, переключиться на `release` и потом вернуть. Какие шаги предпримешь? Отметь все подходящие варианты.

А) `git stash push`, `git switch release`, после задач `git switch feature` и `git stash pop`  
Б) `git reset --hard` без сохранения  
В) `git stash save --keep-index`, переключение и возврат стэша  
Г) Копировать файлы вручную

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 4
Какие признаки хорошего сообщения коммита помогут ревьюеру быстрее разобраться в изменениях? Отметь все подходящие варианты.

А) Кратко описывает суть в повелительном наклонении  
Б) Упоминает тикет или задачу  
В) Содержит подробности вроде «пофиксил баг» без контекста  
Г) Начинается с «WIP»

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Роль GitLab как платформы для совместной работы, хранения и ревью кода.

### Вопрос 5
Компания запретила использование паролей для `git push`. Как настроить безопасный доступ? Отметь все подходящие варианты.

А) Сгенерировать SSH-ключ и добавить публичную часть в профиль GitLab  
Б) Использовать персональный токен вместо пароля для HTTPS  
В) Хранить пароль в `README`  
Г) Отключить двухфакторную аутентификацию

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Почему использование SSH/токенов обеспечивает безопасность при работе с удалёнными репозиториями.

### Вопрос 6
Команда готовит хотфикс из ветки `main` и просит перенести конкретный коммит из `feature/payment`. Какой командой это сделаешь?

**Правильный ответ:** `git cherry-pick <hash>`

**Проверяемый ОР:** Понимает. - Как структурировать процесс разработки с помощью Git: зачем нужны ветки, почему важна история коммитов и как правильно использовать rebase для упорядочивания истории изменений (*).

### Вопрос 7
Тебе нужно показать историю ветки в виде графа для обсуждения на митапе. Какой командой воспользуешься?

А) `git log --oneline --graph --decorate`  
Б) `git status`  
В) `git show`  
Г) `git describe`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 8
Перед выпуском версии 1.3 ты хочешь пометить текущий коммит тегом и отправить его в GitLab. Какие действия нужны?

А) `git tag v1.3`, `git push origin v1.3`  
Б) `git branch v1.3`, `git push`  
В) `git tag --delete v1.3`  
Г) `git reset v1.3`

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль GitLab как платформы для совместной работы, хранения и ревью кода.

### Вопрос 9
Бэкенд отвечает кодом `202 Accepted`, когда запрос ещё в обработке. Что должен сделать клиент?

А) Сразу считать операцию завершённой без проверки  
Б) Отслеживать статус через указанный URL или повторный запрос  
В) Прервать выполнение  
Г) Повторять тот же запрос бесконечно

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Важность корректного использования статус-кодов для обработки ошибок и успешных операций.

### Вопрос 10
Тебе нужно кешировать GET-запросы к API. Какие заголовки пригодятся? Отметь все подходящие варианты.

А) `Cache-Control`  
Б) `ETag`  
В) `If-None-Match`  
Г) `Content-Disposition`

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Основные методы HTTP (GET, POST, PUT, DELETE) и значение статус-кодов в коммуникации клиент-сервер.

### Вопрос 11
Какие основные части присутствуют в HTTP-ответе? Отметь все подходящие варианты.

А) Стартовая строка со статусом  
Б) Набор заголовков  
В) Тело ответа (если требуется)  
Г) Имя ветки Git

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Различия между запросом к серверу и ответом, а также структуру типичного REST-запроса и ответа.

### Вопрос 12
Нужно обновить только поле телефона в профиле. Какой метод и маршрут для REST подойдут лучше всего?

А) PATCH `/api/users/{id}`  
Б) GET `/api/users/{id}`  
В) POST `/api/users/phone`  
Г) DELETE `/api/users/{id}/phone`

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Почему выбор конкретного HTTP-метода соответствует определённой операции.

### Вопрос 13
API вернул `415 Unsupported Media Type` на POST-запрос. Что стоит проверить?

А) Верный ли `Content-Type`  
Б) Поддерживает ли сервер отправленный формат  
В) Существование ресурса  
Г) Наличие куки

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Важность корректного использования статус-кодов для обработки ошибок и успешных операций.

### Вопрос 14
Чем отличаются path-параметры от query-параметров? Отметь все подходящие варианты.

А) Path задают идентификаторы ресурса и входят в маршрут  
Б) Query используются для фильтрации и передаются после `?`  
В) Query всегда обязательные  
Г) Path можно менять порядок без обновления маршрута

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Как REST API стандартизирует структуру URL, методы HTTP, заголовки, тело запроса и ответа, облегчая интеграцию различных систем.

### Вопрос 15
Во время тестирования CORS браузер блокирует запросы. Что проверить в первую очередь? Отметь все подходящие варианты.

А) Заголовок `Access-Control-Allow-Origin`  
Б) Разрешённые методы в ответе сервера  
В) Наличие preflight-ответа на OPTIONS  
Г) Наличие SSH-ключа

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 16
Как отправить POST-запрос с JSON-телом и авторизационным токеном, используя `requests`?

**Правильный ответ:** `requests.post(url, json=data, headers={"Authorization": f"Bearer {token}"})`

**Проверяемый ОР:** Понимает. - Как правильно формировать GET и POST запросы, передавать параметры и обрабатывать ошибки (например, таймауты или неверные статус-коды).

### Вопрос 17
Запрос через `requests` периодически падает с `requests.ConnectionError`. Какие шаги помогут устойчиво обработать ситуацию? Отметь все подходящие варианты.

А) Логировать ошибку и завершать выполнение с понятным сообщением  
Б) Добавить повторные попытки с задержкой  
В) Игнорировать исключение  
Г) Перейти на `print`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Логику обработки ошибок при запросах и как корректная обработка может предотвратить сбои в работе приложения.

### Вопрос 18
API вернул:
```json
{"data": {"items": [{"sku": "A1", "qty": 2}, {"sku": "B2", "qty": 5}]}}
```
Как получить количество товара со SKU `B2` из словаря `data`?

**Правильный ответ:** `next(item["qty"] for item in data["data"]["items"] if item["sku"] == "B2")` (принимается индексирование по списку)

**Проверяемый ОР:** Понимает. - Почему JSON является предпочтительным форматом обмена данными в веб-разработке, и как вложенные структуры JSON отображаются в Python.

### Вопрос 19
Какие аргументы `json.dumps` помогут сериализовать нестандартные типы и красиво отформатировать вывод? Отметь все подходящие варианты.

А) `default=str`  
Б) `indent=2`  
В) `ensure_ascii=False`  
Г) `timeout=5`

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Методы сериализации и парсинга JSON в объекты Python.

### Вопрос 20
Ты работаешь с API, которое требует reuse-сессии. Зачем использовать `requests.Session()`?

А) Повторно использовать соединения и общие заголовки  
Б) Автоматически кешировать ответы  
В) Получать JSON без парсинга  
Г) Генерировать токены

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как правильно формировать GET и POST запросы, передавать параметры и обрабатывать ошибки (например, таймауты или неверные статус-коды).

### Вопрос 21
Что делает `response.raise_for_status()` и почему это полезно?

А) Бросает исключение для кодов 4xx/5xx и позволяет централизованно обрабатывать ошибки  
Б) Конвертирует тело ответа в JSON  
В) Сохраняет лог запроса  
Г) Меняет метод на GET

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Логику обработки ошибок при запросах и как корректная обработка может предотвратить сбои в работе приложения.

### Вопрос 22
Как убедиться, что сервер вернул ожидаемый `Content-Type`, и завершить программу, если формат неверный? Приведи пример кода на `requests`.

**Правильный ответ:**
```python
response = requests.get(url, timeout=5)
if response.headers.get("Content-Type") != "application/json":
    print("Неверный формат ответа")
    exit(1)
```
(принимаются эквивалентные варианты)

**Проверяемый ОР:** Понимает. - Логику обработки ошибок при запросах и как корректная обработка может предотвратить сбои в работе приложения.

### Вопрос 23
После рефакторинга `services.py` и `models.py` импортируют друг друга. Какие шаги помогут разорвать цикл? Отметь все подходящие варианты.

А) Вынести общие типы в новый модуль  
Б) Перенести локальные импорты внутрь функций  
В) Оставить всё как есть  
Г) Добавить `from __future__ import annotations` и пересмотреть архитектуру

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как возникновение циклических импортов влияет на выполнение программы и как их избежать посредством правильного проектирования.

### Вопрос 24
Модуль назвали `json.py`, из-за чего стандартная библиотека `json` перестала корректно работать. Что сделать?

А) Переименовать свой модуль и очистить компилированные файлы  
Б) Удалить стандартную библиотеку  
В) Добавить к названию пробел  
Г) Переопределить `sys.modules["json"]`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Проблемы, связанные с конфликтами имён при импорте и циклическими зависимостями между модулями.

### Вопрос 25
На созвоне по архитектуре обсуждают, как упорядочить крупный сервис. Почему стоит разделять проект на пакеты `api`, `domain`, `storage`? Отметь все подходящие варианты.

А) Упростить тестирование отдельных слоёв  
Б) Переписать код быстрее  
В) Уменьшить связанность и улучшить читаемость  
Г) Выиграть в производительности интерпретатора

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Что такое модульность и как разделение кода на логические блоки способствует его поддержке и тестированию.

### Вопрос 26
Когда имеет смысл использовать `__all__` в `__init__.py` пакета?

А) Чтобы явно указать публичные объекты при импорте `from package import *`  
Б) Чтобы ускорить импорт  
В) Чтобы скрыть баги  
Г) Чтобы автоматически генерировать документацию

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль ясного разделения логики приложения для обеспечения масштабируемости и облегчения поддержки проекта.

### Вопрос 27
Ты создаёшь нового Telegram-бота. Какие шаги выполняешь в BotFather?

А) Команда `/newbot`  
Б) Ввод имени и username  
В) Получение токена доступа  
Г) Автоматическое добавление всех пользователей в администраторы

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Как создать Telegram-бота через BotFather и получить токен для работы.

### Вопрос 28
Ты используешь `python-telegram-bot` v20 и хочешь запустить бота асинхронно. Какой код подойдёт?

**Правильный ответ:**
```python
application = Application.builder().token(TOKEN).build()
application.run_polling()
```
(принимаются варианты с `asyncio.run(application.initialize())` и `application.start()`)

**Проверяемый ОР:** Понимает. - Как Telegram Bot API обеспечивает связь между пользователем и сервером, и почему важно правильно настроить обработку команд.

### Вопрос 29
Бот отвечает на команды, но не реагирует на текст. Какие проверки сделаешь? Отметь все подходящие варианты.

А) Зарегистрирован ли `MessageHandler(filters.TEXT, ...)`  
Б) Нет ли исключений внутри обработчика  
В) Корректно ли настроен polling или webhook  
Г) Не забанен ли пользователь в GitLab

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как Telegram Bot API обеспечивает связь между пользователем и сервером, и почему важно правильно настроить обработку команд.

### Вопрос 30
Код бота вырос до нескольких сотен строк. Как логично разделить ответственность по файлам? Отметь все подходящие варианты.

А) `handlers/commands.py` — команды, `handlers/messages.py` — текст, `services/external.py` — интеграции  
Б) Конфигурацию и токены вынести в `settings.py`  
В) Весь код держать в `main.py` ради скорости  
Г) Разложить логику по пакетам в зависимости от слоя

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Роль библиотек, упрощающих интеграцию с Telegram, и как они структурируют работу бота.

### Вопрос 31
Продакт просит добавить пользователю выбор «Да/Нет» в одном сообщении. Нужно построить inline-меню из двух кнопок «Да» и «Нет». Как создать клавиатуру?

**Правильный ответ:**
```python
keyboard = InlineKeyboardMarkup([
    [InlineKeyboardButton("Да", callback_data="confirm_yes"),
     InlineKeyboardButton("Нет", callback_data="confirm_no")]
])
```
(принимаются аналогичные конструкции)

**Проверяемый ОР:** Знает. - Что такое inline-кнопки и клавиатуры в Telegram-ботах и для чего они используются.

### Вопрос 32
Как выбрать структуру `callback_data`, чтобы в обработчике было понятно, о каком заказе идёт речь? Отметь все подходящие идеи.

А) Кодировать идентификатор заказа в строке, например `order:123`  
Б) Использовать JSON с полями, если данные короткие  
В) Передавать пустую строку и хранить всё в глобальной переменной  
Г) Хардкодить ID в хендлере

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Логику обработки callback-запросов для реализации многошаговых сценариев диалога, в том числе управление состоянием бота.

### Вопрос 33
Фронтенд ждёт от твоего API структурированный ответ об ошибке оплаты. Какие ключи добавишь?

**Правильный ответ:** `code, message, details` (принимаются `status`, `error`, `info`)

**Проверяемый ОР:** Понимает. - Важность корректного использования статус-кодов для обработки ошибок и успешных операций.

### Вопрос 34
Зачем документировать REST API, даже если команда маленькая? Отметь все подходящие варианты.

А) Чтобы новые разработчики быстрее подключались  
Б) Чтобы фронтенд понимал контракт без вопросов  
В) Чтобы выявлять несовпадения ожиданий  
Г) Чтобы GitLab активировал SSH

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как REST API стандартизирует структуру URL, методы HTTP, заголовки, тело запроса и ответа, облегчая интеграцию различных систем.

