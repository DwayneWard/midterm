# Теоретическая часть контрольной работы. Вариант 5
## Разработка на Python. Углублённый

### Вопрос 1
В веб-приложении `GET /reports` возвращает `503 Service Unavailable`, потому что сервис занят обслуживанием. Что показать пользователю?

А) Сообщение о временной недоступности и предложение попробовать позже  
Б) Старые данные из кеша без предупреждений  
В) Мгновенный редирект на страницу логина  
Г) Ничего — просто оставить «Spinning loader»

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 2
Команда делает B2B-продукт: фронтенд SPA, бэкенд — торгует данными. Что берёт на себя бэкенд? Отметь все подходящие варианты.

А) Обработка бизнес-логики  
Б) Рендеринг CSS-анимаций  
В) Хранение данных и интеграции  
Г) Управление элементами UI

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.

### Вопрос 3
Проект — маркетплейс с отдельными командами фронта и бэка. Зачем держать их раздельными? Отметь все подходящие причины.

А) Масштабировать части независимо  
Б) Использовать разные стеки технологий  
В) Прятать бизнес-правила на сервере  
Г) Снизить количество HTTP-запросов до нуля

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.

### Вопрос 4
Ты проводишь onboarding. Какая информация входит в HTTP-запрос? Отметь все подходящие варианты.

А) Метод  
Б) URI / путь  
В) Заголовки  
Г) Тело

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 5
Почему API описывают в контракте перед интеграцией?

А) Чтобы фронт и бэк одинаково понимали формат запросов и ответов  
Б) Чтобы API заменил базу данных  
В) Чтобы все клиенты работали только из браузера  
Г) Чтобы не писать автотесты

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

### Вопрос 6
Назови три HTTP-метода, которые чаще всего применяют для чтения и удаления данных. Напиши через запятую.

**Правильный ответ:** `GET, HEAD, DELETE`

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 7
Разрабатываете публичный API. Что согласовать, чтобы интеграции не ломались? Отметь все подходящие варианты.

А) Формат запросов/ответов и структуру ошибок  
Б) Совместное использование базы данных без API  
В) Версионирование и правила backward compatibility  
Г) Формат логов и идентификаторов запросов

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Знает. - Основную роль API в клиент-серверном взаимодействии.

### Вопрос 8
Проект разворачивают через `pip`. Как установить FastAPI и uvicorn?

**Правильный ответ:** `pip install fastapi "uvicorn[standard]"` (принимаются эквивалентные варианты)

**Проверяемый ОР:** Знает. - Как устанавливать и запускать FastAPI.

### Вопрос 9
Передали код:
```python
router = APIRouter()
router.post("/sync")
```
Обработчика нет. Как поведёт себя приложение?

А) FastAPI сгенерирует обработчик  
Б) Приложение упадёт при запуске  
В) Эндпоинт вернёт пустой словарь  
Г) Декоратор проигнорируется

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).

### Вопрос 10
Нужно принимать параметр `source` из query-строки. Какие объявления подходят? Отметь все подходящие варианты.

А) `def list_sources(source: str | None = None)`  
Б) `def list_sources(source: str = Query(None))`  
В) `def list_sources(source: str = Path(...))`  
Г) `def list_sources(source: Request)`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.

### Вопрос 11
Есть `@app.get("/files/{file_id}")` с типом `file_id: int`. Какой статус вернёт FastAPI, если вызвать `/files/report`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.

### Вопрос 12
Какой URL откроешь, чтобы посмотреть Redoc-документацию FastAPI? Напиши путь.

**Правильный ответ:** `/redoc`

**Проверяемый ОР:** Знает. - Как FastAPI генерирует документацию API (Swagger, Redoc).

### Вопрос 13
Кодовая база растёт. Какие шаги помогут поддерживать структуру FastAPI-сервиса? Отметь все подходящие варианты.

А) Организовать эндпоинты в модули и подключать их через `APIRouter`  
Б) Разнести бизнес-логику и модели в отдельные пакеты  
В) Держать всё в `main.py`  
Г) Настроить конфигурацию и зависимости в отдельном модуле  
Д) Создать модуль под каждый HTTP-метод

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.

### Вопрос 14
Ресурс `shipments` добавляет CRUD. Соотнеси операции и методы. Отметь все подходящие соответствия.

А) Создано → POST  
Б) Получить детально → GET  
В) Удалить → DELETE  
Г) Полностью обновить → PATCH  
Д) Частично обновить →  PUT
Е) Проверить доступность → TRACE

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Принципы реализации CRUD-операций в рамках REST API.

### Вопрос 15
Клиент отправил форму, сервер вызывает `request.json()`. Что ответит FastAPI?

А) Преобразует автоматически  
Б) Вернёт 422/400  
В) Вернёт пустой ответ  
Г) Сменит HTTP-метод

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

### Вопрос 16
Перед запуском JSON API вы синхронизируетесь с фронтендом. Какие правила соблюдёшь? Отметь все подходящие варианты.

А) Укажешь `Content-Type: application/json`  
Б) Будешь использовать единый формат тела  
В) Вставишь логи прямо в ответ  
Г) Документируешь контракт  
Д) Возвращать ошибки с описанием полей

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 17
При вызове `POST /payments` API возвращает 500 из-за некорректного JSON. Как убедиться, что проблема в валидации? Отметь все подходящие варианты.

А) Повторять запрос до успеха  
Б) Проверить схемы Pydantic и добавить проверку входных данных  
В) Логировать тело запроса и выявлять неверные поля  
Г) Перейти на GET  
Д) Переходить на XML

**Правильные ответы:** Б, В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 18
Эндпоинт `PUT /users/{id}` отработал без тела. Какой статус вернёшь? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.

### Вопрос 19
Нужно отрендерить `stats.html` с данными `report`. Какие шаги обязательны? Отметь все подходящие варианты.

А) `TemplateResponse("stats.html", {"request": request, "report": report})`  
Б) Передать контекст словарём  
В) Хранить данные в глобальной переменной  
Г) Удалить `request` из контекста

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.

### Вопрос 20
Как подключить статику из `static_src`?

А) `app.mount("/static", StaticFiles(directory="static_src"), name="static")`  
Б) `app.static("/static")`  
В) `app.include_router("/static")`  
Г) `app.serve_static("static_src")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.

### Вопрос 21
В шаблоне выводится `{{ username }}`, но значение не передали. Что увидит пользователь?

А) Ошибка сервера  
Б) Пустая строка  
В) Строка `{{ username }}`  
Г) Значение по умолчанию 0

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.

### Вопрос 22
Форма отправила пустой `phone`, сервер это не проверил. Чем грозит?

А) Ничем  
Б) Ошибками и некорректной аналитикой  
В) FastAPI заполнит значение автоматически  
Г) Браузер повторит запрос с корректной строкой

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.

### Вопрос 23
Какие данные HTML-форма передаёт без доп-настроек? Отметь все подходящие варианты.

А) Текст  
Б) Числа  
В) Файлы (при `multipart/form-data`)  
Г) JSON-объекты

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.

### Вопрос 24
Пользователь отправил форму, в логе ошибка: `ValueError: invalid literal for int() with base 10`. Что сделаешь?

А) Спрячешь поле, чтобы не мешало  
Б) Добавишь серверную валидацию  
В) Заменишь POST на GET  
Г) Вернёшь понятное сообщение об ошибке  
Д) Игнорируешь ошибку

**Правильные ответы:** Б, Г

**Проверяемый ОР:** Понимает. - Почему важно проводить валидацию и фильтрацию пользовательского ввода для защиты серверной логики и данных.

### Вопрос 25
Как сделать интеграцию API и фронта устойчивой? Отметь все подходящие варианты.

А) Использовать единый формат `{ "data": ..., "error": ... }`  
Б) Синхронизировать документацию и версии  
В) Всегда возвращать 200  
Г) Писать интеграционные тесты  
Д) Логировать ошибки и добавлять request-id

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.

### Вопрос 26
Клиент запрашивает несуществующий `device_id`. Какой статус-код вернёшь? Напиши число.

**Правильный ответ:** `404`

**Проверяемый ОР:** Знает. - Какие бывают типы ошибок в API (400, 404, 500 и др.).

### Вопрос 27
Ошибки API должны содержать три обязательных поля. Назови их через запятую.

**Правильный ответ:** `code, message, details` (принимаются аналоги вроде `status, error, info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 28
Увидел серию 500 из-за перегрузки базы. Что предпримешь? Отметь все подходящие варианты.

А) Добавить обработчик, возвращающий JSON и логирующий ошибку  
Б) Оставить 500 без тела  
В) Вернуть 503 и объяснить ситуацию  
Г) Скрыть ошибку и вернуть 200  
Д) Согласовать, как фронт показывает такую ошибку

**Правильные ответы:** А, В, Д

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 29
В Postman пришёл ответ:
```json
{
  "detail": [
    {"loc": ["body", "amount"], "msg": "value is not a valid float"}
  ]
}
```
Что это значит?

А) Клиент передал неправильное поле `amount`  
Б) Ошибка сервера FastAPI  
В) Прокси переписал ответ  
Г) Это HTML-страница

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).

### Вопрос 30
Добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def custom_handler(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "trace_id": request.state.trace_id},
    )
```
Зачем он нужен?

А) Чтобы унифицировать ответы об ошибках и добавлять trace-id  
Б) Чтобы скрывать ошибки  
В) Чтобы логировать только успехи  
Г) Чтобы обойти FastAPI

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 31
Фронтенд получает `307` на `/login`. Что это означает?

А) Клиент обратился не к тому домену  
Б) Сессия истекла, нужно залогиниться  
В) Сервер перезапускается  
Г) База данных недоступна

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 32
Приложение игнорирует 422 Validation Error. Что стоит сделать?

А) Продолжать игнорировать  
Б) Перенаправлять на главную  
В) Показать ошибки пользователю и дать исправить  
Г) Сменить метод на PUT

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 33
Эндпоинт `/api/orders` при любой ошибке возвращает 200 с текстом «error». Какие шаги предпримешь? Отметь все подходящие варианты.

А) Возвращать корректные статусы 4xx/5xx  
Б) Включать понятное описание ошибки в JSON  
В) Оставить 200  
Г) Документировать возможные статусы

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 34
Фронтенд ждёт `{ "orders": [...] }`, а API выдаёт `{ "rows": [...] }`. Чем это грозит?

А) Клиент не найдёт нужное поле и покажет ошибку  
Б) Браузер автоматически адаптирует ответ  
В) Сервер перепишет ответ  
Г) Ошибка исчезнет после перезагрузки

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

