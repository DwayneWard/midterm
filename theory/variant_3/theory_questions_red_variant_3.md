# Теоретическая часть контрольной работы. Вариант 3
## Разработка на Python. Углублённый

### Вопрос 1
Эндпоинт должен принимать query-параметр `region` из URL `/regions?region=east`. Какие объявления параметра функции-обработчика подходят? Отметь все подходящие варианты.

А) `def list_regions(region: str = Path(...))`
Б) `def list_regions(region: str = "/regions?region")`
В) `def list_regions(region: str = Query(default=None))`
Г) `def list_regions(region: str | None = None)`

**Правильные ответы:** В, Г

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.



### Вопрос 2
Сервер не проверил данные формы и сохранил пустое поле `phone` в базу данных. Какие последствия возможны?

А) Автоматическим заполнением поля через FastAPI
Б) Некорректными данными в базе и ошибками при дальнейшей обработке
В) Ничего критического — пустая строка является валидным значением
Г) Автоматической повторной отправкой формы браузером

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.



### Вопрос 3
Как сделать взаимодействие API и фронта устойчивым? Отметь все подходящие варианты.

А) Автоматизировать тесты (Postman, pytest)  
Д) Логировать ошибки и добавлять request-id
Б) Согласовывать изменения API в документации
В) Возвращать единый формат `{ "data": ..., "error": ... }`
Г) Всегда возвращать 200

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.



### Вопрос 4
Фронтенд получает `302` на `/auth/login`. Что происходит?

А) Пользователь стучится на неверный домен
Б) База данных упала
В) Сервер перезапускается
Г) Сессия истекла, и сервер просит авторизацию

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 5
Эндпоинт `GET /catalog/{item_id}` объявлен с параметром `item_id: int`. Какой статус-код вернёт FastAPI, если клиент запросит `/catalog/book`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.



### Вопрос 6
Назови три HTTP-метода, которые чаще всего используются для изменения данных. Напиши через запятую.

**Правильный ответ:** `POST, PUT, PATCH` (принимаются сочетания с `DELETE`)

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).



### Вопрос 7
Фронтенд вызывает `GET /api/dashboard`, но сервер ответил `504 Gateway Timeout`. Что должен увидеть пользователь?

А) Автоматический редирект на страницу статуса сервиса
Б) Индикатор загрузки без дополнительной информации
В) Сообщение о тайм-ауте и возможность повторить запрос
Г) Данные из кэша с пометкой о возможной устарелости

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 8
Какие типы данных могут передаваться через HTML-формы по умолчанию? Отметь все подходящие варианты.

А) Числовые значения
Б) Файлы (с `multipart/form-data`)
В) JSON-объекты без дополнительной сериализации
Г) Текстовые строки

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.



### Вопрос 9
Какие задачи выполняет бэкенд в архитектуре «SPA + API»? Отметь все подходящие варианты.

А) Серверный рендеринг HTML с применением стилей
Б) Авторизация и проверки
В) Обработка пользовательских событий в браузере
Г) Хранение данных и бизнес-логика

**Правильные ответы:** Б, Г

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.



### Вопрос 10
Эндпоинт `POST /tasks` возвращает 500. Логи показывают ошибку сериализации. Какие шаги помогут подтвердить, что проблема в валидации входящих данных? Отметь все подходящие варианты.

А) Проверить схемы Pydantic и добавить валидацию входных данных
Б) Перейти на формат XML вместо JSON
Д) Валидировать JSON-данные перед сохранением дополнительно
В) Повторять запросы до успешного выполнения
Г) Изменить HTTP-метод на GET

**Правильные ответы:** А

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.



### Вопрос 11
API возвращает 500 из-за временной недоступности базы данных. Какие шаги помогут улучшить обработку ошибок и дать фронтенду понятную обратную связь? Отметь все подходящие варианты.

А) Возвращать статус 503 с сообщением о временной недоступности
Б) Оставить статус 500 и возвращать пустое тело ответа
В) Скрывать ошибку и возвращать статус 200  
Д) Согласовать с фронтендом формат отображения ошибок пользователю
Г) Добавить обработчик исключений, возвращающий структурированный JSON и логирующий ошибку

**Правильные ответы:** А, Г

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.



### Вопрос 12
В Jinja2-шаблоне используется переменная `{{ total_orders }}`, но она не передана в контекст. Что увидит пользователь на странице?

А) В месте подстановки переменной будет пустая строка
Б) FastAPI выбросит исключение при рендеринге шаблона
В) Jinja2 автоматически подставит значение по умолчанию
Г) В шаблоне отобразится текст `{{ total_orders }}` как есть

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.



### Вопрос 13
В FastAPI добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def handle_http(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "trace": request.state.trace_id},
    )
```
Для чего используется такой обработчик?

А) Чтобы логировать только успешные ответы
Б) Чтобы полностью отключить стандартные ответы FastAPI
В) Чтобы скрывать все ошибки от клиента
Г) Чтобы централизованно форматировать ответы об ошибках и добавлять идентификатор запроса

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.



### Вопрос 14
Какие шаги необходимы для передачи данных в Jinja2-шаблон в FastAPI? Отметь все подходящие варианты.

А) Передать данные через словарь в параметр `context`
Б) Использовать глобальные переменные вместо контекста
В) Вызвать `templates.TemplateResponse("dashboard.html", {"request": request, "metrics": metrics})`
Г) Оставить шаблон без данных — они подставятся автоматически

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.



### Вопрос 15
Почему стоит разделять фронтенд и бэкенд при переходе на микросервисы?

А) Чтобы использовать разные технологические стеки и масштабировать их независимо
Б) Чтобы минимизировать объём данных, передаваемых по сети
В) Чтобы сократить задержки между запросами
Г) Чтобы держать бизнес-логику на сервере

**Правильные ответы:** А, Г

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.



### Вопрос 16
Какие компоненты входят в структуру HTTP-запроса? Отметь все подходящие варианты.

А) Путь или URL
Б) Метод
В) Заголовки
Г) Тело

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).



### Вопрос 17
В коде есть декоратор `@router.post("/sync")`, но функция-обработчик отсутствует. Что произойдёт при запуске приложения?

А) Эндпоинт будет игнорироваться, запросы вернут 404
Б) Приложение упадёт с ошибкой при запуске
В) FastAPI подставит обработчик по умолчанию, возвращающий `{"message": "OK"}`
Г) FastAPI автоматически создаст обработчик, возвращающий пустой ответ

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).



### Вопрос 18
Какой код используется для подключения статических файлов в FastAPI?

А) `app.serve_static("public")`
Б) `app.mount("/public", StaticFiles(directory="public"), name="public")`
В) `app.include_router("/public")`
Г) `app.static("/public")`

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.



### Вопрос 19
Эндпоинт `PUT /clients/{id}` успешно обновил существующую запись без тела ответа. Какой статус-код подходит? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.



### Вопрос 20
Зачем фиксировать контракт API перед интеграцией?

А) Чтобы фронтенд и бэкенд использовали единый формат запросов и ответов
Б) Чтобы документировать структуру базы данных
В) Чтобы ограничить доступ к API только через браузер
Г) Чтобы автоматизировать генерацию тестовых данных

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.



### Вопрос 21
Какие три ключевых поля должны быть включены в структурированный JSON-ответ об ошибке? Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются синонимы вроде `status`, `error`, `info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 22
Какие шаги помогают организовать структуру проекта FastAPI для масштабирования? Отметь все подходящие варианты.

А) Хранить все обработчики в одном файле `main.py` для простоты навигации
Б) Вынести логические группы эндпоинтов в отдельные модули и подключить их через `APIRouter`
В) Настроить общие настройки приложения в отдельном модуле  
Д) Использовать один роутер для всех эндпоинтов без группировки
Г) Разделить бизнес-логику, модели данных и вспомогательные функции по отдельным пакетам

**Правильные ответы:** Б, В, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.



### Вопрос 23
Какие шаги необходимы для обеспечения корректной обработки JSON-ответов API клиентом? Отметь все подходящие варианты.

А) Использовать единый формат тела ответа, например `{ "data": ... }`
Б) Добавлять подробные логи сервера в тело ответа для отладки
В) Документировать API-контракт в Swagger/OpenAPI  
Д) Возвращать ошибки с описанием проблемных полей
Г) Указывать заголовок `Content-Type: application/json`

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.



### Вопрос 24
API вернул ответ:
```json
{
  "detail": [
    {"loc": ["query", "offset"], "msg": "value is not a valid integer"}
  ]
}
```
Что означает такой ответ?

А) Ошибка сервера FastAPI
Б) Это HTML-страница
В) Ответ сгенерирован промежуточным прокси
Г) Ошибка клиента (некорректные данные в запросе)

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).



### Вопрос 25
Эндпоинт FastAPI читает данные через `request.json()`, но клиент отправил запрос с заголовком `Content-Type: application/x-www-form-urlencoded`. Что вернёт FastAPI?

А) Автоматически переключится на чтение формы через `request.form()`
Б) Попытается парсить тело как JSON и вернёт ошибку парсинга
В) Вернёт 422 или 400 из-за несоответствия формата тела
Г) Автоматически преобразует форму в JSON и продолжит обработку

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.



### Вопрос 26
Эндпоинт при любой ошибке возвращает статус 200 с сообщением «error». Какие изменения нужно внести, чтобы клиенты корректно обрабатывали разные сценарии? Отметь все подходящие варианты.

А) Включать в ответ структурированное сообщение об ошибке
Б) Документировать возможные HTTP-статусы, которые может вернуть эндпоинт
В) Возвращать статусы 4xx для ошибок клиента и 5xx для ошибок сервера
Г) Сохранять статус 200, чтобы фронтенд не показывал ошибки пользователю

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.
