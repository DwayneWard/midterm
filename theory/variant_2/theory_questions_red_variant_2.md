# Теоретическая часть контрольной работы. Вариант 2
## Разработка на Python. Углублённый

### Вопрос 1
В мобильном банкинге клиент отправляет `POST https://api.bank.local/payments`, но сервер временно недоступен и возвращает ошибку соединения. Что должен сделать фронтенд, чтобы пользователь понял ситуацию?

А) Замаскировать ошибку и показать старые данные  
Б) Сообщить об ошибке сети и предложить повторить позже  
В) Перезагрузить приложение без объяснения  
Г) Бесконечно повторять запрос без паузы

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 2
Команда делит продукт на фронтенд и бэкенд. Какие задачи чаще всего остаются за бэкендом? Отметь все подходящие варианты.

А) Хранение и обработка данных  
Б) Рендеринг HTML в браузере  
В) Авторизация и бизнес-правила  
Г) Анимации и пользовательский интерфейс

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.

### Вопрос 3
Компания переводит монолит в схему «SPA + API». Зачем разделять фронт и бэк? Отметь все подходящие причины.

А) Чтобы масштабировать сервисы независимо  
Б) Чтобы использовать разные технологические стеки  
В) Чтобы спрятать бизнес-логику на сервере  
Г) Чтобы уменьшить количество внешних интеграций

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.

### Вопрос 4
Ниже лог HTTP-запроса:
```
POST /api/profile HTTP/1.1
Host: example.com
Content-Type: application/json
Content-Length: 42

{"email":"user@example.com","name":"Alex"}
```
Какие элементы запроса ты видишь? Отметь все подходящие варианты.

А) Метод  
Б) Путь  
В) Заголовки  
Г) Тело

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 5
Почему команда описывает API в контракте, прежде чем писать код?

А) Контракт фиксирует формат запросов и ответов для всех клиентов  
Б) Это автоматически заменяет базу данных  
В) Контракт нужен только для браузера  
Г) Контракт избавляет от тестирования

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

### Вопрос 6
Назови три HTTP-метода, которые чаще всего используются для CRUD-операций. Напиши их через запятую.

**Правильный ответ:** `GET, POST, DELETE` (принимаются сочетания с `PUT`)

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 7
Фронтенд и бэкенд запускают новую версию API. Что обязательно согласовать, чтобы интеграция не сломалась? Отметь все подходящие варианты.

А) Схему данных запросов и ответов  
Б) Набор кодов ошибок и их интерпретацию  
В) Единое хранилище без API  
Г) Правила версионирования

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Знает. - Основную роль API в клиент-серверном взаимодействии.

### Вопрос 8
Ты разворачиваешь проект через Poetry. Какой командой добавишь FastAPI и uvicorn?

**Правильный ответ:** `poetry add fastapi "uvicorn[standard]"` (принимаются аналоги с отдельной установкой)

**Проверяемый ОР:** Знает. - Как устанавливать и запускать FastAPI.

### Вопрос 9
В код ревью отправили фрагмент:
```python
router = APIRouter()
router.get("/health")
```
Функцию обработчика забыли. Что произойдёт при запуске?

А) FastAPI автоматически создаст обработчик  
Б) Приложение упадёт при старте  
В) Эндпоинт вернёт пустой словарь  
Г) Ошибки не будет, запросы просто игнорируются

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).

### Вопрос 10
Нужно добавить фильтр `priority` как query-параметр. Какие сигнатуры подходят? Отметь все подходящие варианты.

А) `def list_tasks(priority: str | None = None)`  
Б) `def list_tasks(priority: str = Query(None))`  
В) `def list_tasks(priority: str = Path(...))`  
Г) `def list_tasks(priority: Request)`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.

### Вопрос 11
Эндпоинт объявлен как `@app.get("/items/{item_id}")` c типом `item_id: int`. Какой статус вернёт FastAPI на `/items/apple`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.

### Вопрос 12
Тебе понадобился JSON OpenAPI-документации. Какой путь откроешь в FastAPI по умолчанию? Напиши путь.

**Правильный ответ:** `/openapi.json`

**Проверяемый ОР:** Знает. - Как FastAPI генерирует документацию API (Swagger, Redoc).

### Вопрос 13
Проект вырос, и вы решаете пересобрать структуру FastAPI. Какие шаги помогут поддерживать масштаб? Отметь все подходящие варианты.

А) Разнести обработчики по модулям и подключать их через `APIRouter`  
Б) Вынести схемы Pydantic и бизнес-логику в отдельные пакеты  
В) Хранить все эндпоинты в одном файле `main.py`  
Г) Собрать общие настройки приложения в отдельном модуле

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.

### Вопрос 14
Сервис обрабатывает заказы (`orders`). Совмести операции с корректными методами. Отметь все подходящие соответствия.

А) Получить заказ по ID → GET  
Б) Создать заказ → POST  
В) Удалить заказ → DELETE  
Г) Изменить статус заказа частично → PATCH  
Д) Обновить всю информацию о заказе → PUT  
Е) Получить список заказов → OPTIONS

**Правильные ответы:** А, Б, В, Г, Д

**Проверяемый ОР:** Знает. - Принципы реализации CRUD-операций в рамках REST API.

### Вопрос 15
На эндпоинт приходит форма (`application/x-www-form-urlencoded`), а код пытается вызвать `await request.json()`. Что произойдёт?

А) FastAPI преобразует форму в JSON  
Б) FastAPI вернёт ошибку 422/400  
В) FastAPI проигнорирует тело  
Г) FastAPI автоматически сменит метод на GET

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

### Вопрос 16
На стыковке с фронтендом вы согласуете формат JSON-ответов API. Что обязательно учесть, чтобы клиент корректно парсил данные? Отметь все подходящие варианты.

А) Отправлять `Content-Type: application/json`  
Б) Использовать единый формат тела (`{ "payload": ... }`)  
В) Добавлять файл логов в ответ  
Г) Документировать контракт  
Д) Возвращать ошибки с описанием полей

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 17
Фронтенд отправляет `POST /tasks` с JSON, а релизная версия API падает с 500 при сохранении. Какие действия помогут найти проблему с валидацией? Отметь все подходящие варианты.

А) Повторять запросы, пока не пройдёт  
Б) Проверить схемы Pydantic и добавить проверку входных данных  
В) Логировать тело запроса и отмечать проблемные поля  
Г) Перевести метод на GET  
Д) Вернуться к XML-пейлоаду

**Правильные ответы:** Б, В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 18
Эндпоинт `PUT /profiles/{id}` отрабатывает успешно и не возвращает тело. Какой статус-код корректен? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.

### Вопрос 19
Ты рендеришь `report.html` и хочешь передать туда список заказов. Что обязательно сделать?

А) Вызывать `TemplateResponse("report.html", {"request": request, "orders": orders})`  
Б) Передавать контекст словарём  
В) Хранить `orders` в глобальной переменной  
Г) Не передавать `request`, чтобы сэкономить память

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.

### Вопрос 20
Как подключить раздачу статики из папки `assets`?

А) `app.mount("/assets", StaticFiles(directory="assets"), name="assets")`  
Б) `app.static("/assets")`  
В) `app.include_router("/assets")`  
Г) `app.serve_static("assets")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.

### Вопрос 21
В шаблоне стоит `{{ total }}`, но это значение не передали. Что увидит пользователь?

А) Приложение упадёт  
Б) Место останется пустым  
В) Выведется `{{ total }}`  
Г) Подставится 0 автоматически

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.

### Вопрос 22
Форма отправила пустое обязательное поле `phone`, а сервер сохранил запись без проверки. Чем это грозит?

А) Ничем, пустая строка допустима  
Б) Некорректными данными и ошибками обработки  
В) FastAPI сам восстановит значение  
Г) Браузер исправит ввод и повторит запрос

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.

### Вопрос 23
Какие типы данных HTML-форма может отправить по умолчанию? Отметь все подходящие варианты.

А) Текст  
Б) Число  
В) Файл  
Г) JSON без сериализации

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.

### Вопрос 24
На стенде QA после отправки формы пользователь видит `500 Internal Server Error`, потому что поле `age` не преобразовалось в число. Какие действия предпримешь, чтобы устранить проблему?

А) Скрыть поле `age` на фронтенде  
Б) Добавить серверную валидацию  
В) Сменить метод на GET  
Г) Вернуть понятное сообщение об ошибке  
Д) Продолжать сохранять данные как есть

**Правильные ответы:** Б, Г

**Проверяемый ОР:** Понимает. - Почему важно проводить валидацию и фильтрацию пользовательского ввода для защиты серверной логики и данных.

### Вопрос 25
Перед релизом API и фронтенд синхронизируют контракт. Как обеспечить стабильную интеграцию? Отметь все подходящие варианты.

А) Единую структуру ответов (`data`, `error`)  
Б) Всегда возвращать 200 при ошибках  
В) Поддерживать актуальную документацию  
Г) Автоматизировать тесты (Postman, pytest) для критичных сценариев  
Д) Логировать ошибки и добавлять request-id

**Правильные ответы:** А, В, Г, Д

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.

### Вопрос 26
Клиент запросил `GET /warehouses/9999`, но такого склада нет. Какой статус вернёшь? Напиши число.

**Правильный ответ:** `404`

**Проверяемый ОР:** Знает. - Какие бывают типы ошибок в API (400, 404, 500 и др.).

### Вопрос 27
Команда договорилась, что ошибки API возвращаются в стандартном JSON. Назови три поля, которые стоит включить в ответ. Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются синонимы вроде `status, description, meta`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 28
Мониторинг показывает 500 из-за недоступной базы. Какие шаги помогут сделать поведение API предсказуемым? Отметь все подходящие варианты.

А) Добавить обработчик исключений, возвращающий JSON и логирующий ошибку  
Б) Оставить 500 с пустым телом  
В) Возвращать 503 и объяснять проблему  
Г) Всегда отвечать 200  
Д) Согласовать отображение ошибки на фронте

**Правильные ответы:** А, В, Д

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 29
Postman показывает ответ:
```json
{
  "detail": [
    {"loc": ["query", "limit"], "msg": "value is not a valid integer"}
  ]
}
```
Что это означает?

А) Клиент передал некорректный query-параметр  
Б) Сервер FastAPI упал  
В) Прокси переписал ответ  
Г) Это HTML-страница

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).

### Вопрос 30
Разработчик добавил обработчик:
```python
@app.exception_handler(HTTPException)
async def handler(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "trace": request.state.trace_id},
    )
```
Зачем он нужен?

А) Чтобы унифицировать ответы об ошибках и передавать идентификатор запроса  
Б) Чтобы скрыть реальные ошибки  
В) Чтобы логировать только успешные ответы  
Г) Чтобы заменить FastAPI на свой сервер

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 31
Фронтенд получает `307 Temporary Redirect` на `/signin`. Что это значит?

А) Клиент стучится в неверный домен  
Б) Сессия истекла, и сервер просит авторизацию  
В) Сервер перезагружается  
Г) База данных недоступна

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 32
Приложение игнорирует ответы 422 и никак не уведомляет пользователя. Что стоит сделать? Отметь все подходящие варианты.

А) Продолжать игнорировать 422, чтобы не раздражать пользователя  
Б) Перенаправлять пользователя на главную  
В) Показывать ошибки валидации и дать исправить ввод  
Г) Сменить метод на PUT

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 33
Эндпоинт `/api/orders` всегда возвращает 200 даже при ошибках. Что нужно изменить? Отметь все подходящие варианты.

А) Возвращать 4xx/5xx в зависимости от сценария  
Б) Отправлять понятное описание ошибки  
В) Скрывать ошибки за кодом 200  
Г) Документировать возможные статусы

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 34
Фронтенд ожидает JSON `{ "orders": [...] }`, а сервис отвечает `{ "results": [...] }`. Чем это грозит?

А) UI не найдёт нужное поле и покажет ошибочную страницу  
Б) Браузер автоматически переименует ключ  
В) Сервер перепишет ответ под клиента  
Г) При следующем вызове проблема исчезнет

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.
 