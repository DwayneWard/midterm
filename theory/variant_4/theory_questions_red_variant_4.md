# Теоретическая часть контрольной работы. Вариант 4
## Разработка на Python. Углублённый

### Вопрос 1
Внутренний портал делает `GET https://intra.company/api/kpi`, однако бэкенд вернул `502 Bad Gateway`. Как лучше уведомить пользователя?

А) Показать уведомление о временной ошибке и предложить повторить позже  
Б) Отобразить последние доступные данные без уведомления  
В) Попытаться автоматически перезагрузить страницу через таймаут  
Г) Перенаправить пользователя на страницу обслуживания

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 2
Проект — мобильное приложение + REST API. Какие задачи относятся к бэкенду? Отметь все подходящие варианты.

А) Проверка прав доступа  
Б) Динамическая генерация HTML на сервере  
В) Хранение и обработка данных  
Г) Валидация форм на стороне клиента

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.

### Вопрос 3
Команда переходит на micro frontends. Зачем держать фронт и бэк отдельно? Отметь все подходящие варианты.

А) Независимое масштабирование сервисов  
Б) Возможность использовать технологии под задачу  
В) Сокрытие бизнес-логики на сервере  
Г) Оптимизация количества HTTP-запросов путём батчинга

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.

### Вопрос 4
HTTP-запрос состоит из нескольких элементов. Какие компоненты входят в его структуру? Отметь все подходящие варианты.

А) Метод  
Б) URL/путь  
В) Заголовки  
Г) Тело

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 5
Зачем документировать контракт API перед предоставлением его партнёрам?

А) Чтобы согласовать формат запросов и ответов и предотвратить интеграционные ошибки  
Б) Чтобы описать схему базы данных для интеграции  
В) Чтобы позволить партнёрам настраивать внутреннюю логику сервиса  
Г) Чтобы ограничить доступ к API только через веб-браузеры

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

### Вопрос 6
Назови три HTTP-метода, которые используются для чтения данных. Напиши их через запятую.

**Правильный ответ:** `GET, HEAD, OPTIONS` (принимаются комбинации с `GET, HEAD` и др.)

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 7
В коде есть декоратор `@router.get("/status")`, но функция-обработчик отсутствует. Что произойдёт при запуске приложения?

А) FastAPI автоматически создаст обработчик, возвращающий пустой ответ  
Б) Приложение упадёт с ошибкой при запуске  
В) Эндпоинт будет игнорироваться, запросы вернут 404  
Г) FastAPI подставит обработчик по умолчанию, возвращающий `{"message": "OK"}`

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).

### Вопрос 8
Эндпоинт должен принимать query-параметр `category` из URL `/items?category=books`. Какие объявления параметра функции-обработчика подходят? Отметь все подходящие варианты.

А) `def list_items(category: str | None = None)`  
Б) `def list_items(category: str = Query(None))`  
В) `def list_items(category: str = Path(...))`  
Г) `def list_items(category: str = "/items?category")`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.

### Вопрос 9
Эндпоинт `GET /clients/{client_id}` объявлен с параметром `client_id: int`. Какой статус-код вернёт FastAPI, если клиент запросит `/clients/foo`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.

### Вопрос 10
Какие шаги помогают организовать структуру проекта FastAPI для масштабирования? Отметь все подходящие варианты.

А) Вынести логические группы эндпоинтов в отдельные модули и подключить их через `APIRouter`  
Б) Хранить все обработчики в одном файле `main.py` для простоты навигации  
В) Разделить бизнес-логику, модели данных и вспомогательные функции по отдельным пакетам  
Г) Настроить общие настройки приложения в отдельном модуле  
Д) Использовать один роутер для всех эндпоинтов без группировки

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.

### Вопрос 11
Эндпоинт FastAPI читает данные через `request.json()`, но клиент отправил запрос с заголовком `Content-Type: application/x-www-form-urlencoded`. Что вернёт FastAPI?

А) Автоматически преобразует форму в JSON и продолжит обработку  
Б) Вернёт 422 или 400 из-за несоответствия формата тела  
В) Попытается парсить тело как JSON и вернёт ошибку парсинга  
Г) Автоматически переключится на чтение формы через `request.form()`

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

### Вопрос 12
Какие шаги необходимы для обеспечения корректной обработки JSON-ответов API клиентом? Отметь все подходящие варианты.

А) Указывать заголовок `Content-Type: application/json`  
Б) Использовать единый формат тела ответа, например `{ "data": ... }`  
В) Добавлять подробные логи сервера в тело ответа для отладки  
Г) Документировать API-контракт в Swagger/OpenAPI  
Д) Возвращать ошибки с описанием проблемных полей

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 13
Эндпоинт `POST /orders` возвращает 500. Логи показывают ошибку сериализации. Какие шаги помогут подтвердить, что проблема в валидации входящих данных? Отметь все подходящие варианты.

А) Повторять запросы до успешного выполнения  
Б) Проверить схемы Pydantic и добавить валидацию входных данных  
В) Изменить HTTP-метод на GET  
Г) Перейти на формат XML вместо JSON
Д) Валидировать JSON-данные перед сохранением дополнительно

**Правильные ответы:** Б

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 14
Эндпоинт `PUT /employees/{id}` успешно обновил существующую запись без тела ответа. Какой статус-код подходит? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.

### Вопрос 15
Какие шаги необходимы для передачи данных в Jinja2-шаблон в FastAPI? Отметь все подходящие варианты.

А) Вызвать `templates.TemplateResponse("summary.html", {"request": request, "stats": stats})`  
Б) Передать данные через словарь в параметр `context`  
В) Использовать глобальные переменные вместо контекста  
Г) Оставить шаблон без данных — они подставятся автоматически

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.

### Вопрос 16
Какой код используется для подключения статических файлов в FastAPI?

А) `app.mount("/static", StaticFiles(directory="staticfiles"), name="static")`  
Б) `app.static("/static")`  
В) `app.include_router("/static")`  
Г) `app.serve_static("staticfiles")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.

### Вопрос 17
В Jinja2-шаблоне используется переменная `{{ total }}`, но она не передана в контекст. Что увидит пользователь на странице?

А) FastAPI выбросит исключение при рендеринге шаблона  
Б) В месте подстановки переменной будет пустая строка  
В) В шаблоне отобразится текст `{{ total }}` как есть  
Г) Jinja2 автоматически подставит значение по умолчанию

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.

### Вопрос 18
Сервер не проверил данные формы и сохранил пустое поле `email` в базу данных. Какие последствия возможны?

А) Ничего критического — пустая строка является валидным значением  
Б) Некорректными данными в базе и ошибками при дальнейшей обработке  
В) Автоматическим заполнением поля через FastAPI  
Г) Автоматической повторной отправкой формы браузером

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.

### Вопрос 19
Какие типы данных могут передаваться через HTML-формы по умолчанию? Отметь все подходящие варианты.

А) Текстовые строки  
Б) Числовые значения  
В) Файлы (с `multipart/form-data`)  
Г) JSON-объекты без дополнительной сериализации

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.

### Вопрос 20
Как обеспечить надёжную интеграцию API и фронта? Отметь все подходящие варианты.

А) Использовать единый формат ответа (`data`, `error`)  
Б) Поддерживать живую документацию  
В) Игнорировать статусы и возвращать 200  
Г) Писать автоматические тесты интеграции  
Д) Логировать ошибки и добавлять идентификатор запроса

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.

### Вопрос 21
Какие три ключевых поля должны быть включены в структурированный JSON-ответ об ошибке? Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются альтернативные названия вроде `status, error, info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 22
API возвращает 500 из-за временной недоступности базы данных. Какие шаги помогут улучшить обработку ошибок и дать фронтенду понятную обратную связь? Отметь все подходящие варианты.

А) Добавить обработчик исключений, возвращающий структурированный JSON и логирующий ошибку  
Б) Оставить статус 500 и возвращать пустое тело ответа  
В) Возвращать статус 503 с сообщением о временной недоступности  
Г) Скрывать ошибку и возвращать статус 200  
Д) Согласовать с фронтендом формат отображения ошибок пользователю

**Правильные ответы:** А, В, Д

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 23
API вернул ответ:
```json
{
  "detail": [
    {"loc": ["body", "price"], "msg": "value is not a valid decimal"}
  ]
}
```
Что означает такой ответ?

А) Ошибка клиента (некорректные данные в запросе)  
Б) Ошибка сервера FastAPI  
В) Ответ сгенерирован промежуточным прокси  
Г) Это HTML-страница

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).

### Вопрос 24
В FastAPI добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def http_exception_logger(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "request_id": request.state.request_id},
    )
```
Для чего используется такой обработчик?

А) Чтобы централизованно форматировать ответы об ошибках и добавлять идентификатор запроса  
Б) Чтобы скрывать все ошибки от клиента  
В) Чтобы логировать только успешные ответы  
Г) Чтобы полностью отключить стандартные ответы FastAPI

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 25
Фронтенд получает `308 Permanent Redirect` на `/signin`. Что это значит?

А) Клиент обратился к неверному домену  
Б) Пользователь должен авторизоваться заново  
В) Сервер рестартится  
Г) База недоступна

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 26
Эндпоинт при любой ошибке возвращает статус 200 с сообщением «error». Какие изменения нужно внести, чтобы клиенты корректно обрабатывали разные сценарии? Отметь все подходящие варианты.

А) Возвращать статусы 4xx для ошибок клиента и 5xx для ошибок сервера  
Б) Включать в ответ структурированное сообщение об ошибке  
В) Сохранять статус 200, чтобы фронтенд не показывал ошибки пользователю  
Г) Документировать возможные HTTP-статусы, которые может вернуть эндпоинт

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.
