# Теоретическая часть контрольной работы. Вариант 4
## Разработка на Python. Углублённый

### Вопрос 1
Эндпоинт должен принимать query-параметр `category` из URL `/items?category=books`. Какие объявления параметра функции-обработчика подходят? Отметь все подходящие варианты.

А) `def list_items(category: str = Query(None))`
Б) `def list_items(category: str = "/items?category")`
В) `def list_items(category: str | None = None)`
Г) `def list_items(category: str = Path(...))`

**Правильные ответы:** А, В

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.



### Вопрос 2
Какие шаги необходимы для обеспечения корректной обработки JSON-ответов API клиентом? Отметь все подходящие варианты.

А) Указывать заголовок `Content-Type: application/json`
Б) Документировать API-контракт в Swagger/OpenAPI  
Д) Возвращать ошибки с описанием проблемных полей
В) Использовать единый формат тела ответа, например `{ "data": ... }`
Г) Добавлять подробные логи сервера в тело ответа для отладки

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.



### Вопрос 3
Какие три ключевых поля должны быть включены в структурированный JSON-ответ об ошибке? Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются альтернативные названия вроде `status, error, info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 4
Какие типы данных могут передаваться через HTML-формы по умолчанию? Отметь все подходящие варианты.

А) Текстовые строки
Б) Числовые значения
В) Файлы (с `multipart/form-data`)
Г) JSON-объекты без дополнительной сериализации

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.



### Вопрос 5
Какие шаги необходимы для передачи данных в Jinja2-шаблон в FastAPI? Отметь все подходящие варианты.

А) Вызвать `templates.TemplateResponse("summary.html", {"request": request, "stats": stats})`
Б) Использовать глобальные переменные вместо контекста
В) Оставить шаблон без данных — они подставятся автоматически
Г) Передать данные через словарь в параметр `context`

**Правильные ответы:** А, Г

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.



### Вопрос 6
API вернул ответ:
```json
{
  "detail": [
    {"loc": ["body", "price"], "msg": "value is not a valid decimal"}
  ]
}
```
Что означает такой ответ?

А) Ошибка сервера FastAPI
Б) Ошибка клиента (некорректные данные в запросе)
В) Это HTML-страница
Г) Ответ сгенерирован промежуточным прокси

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).



### Вопрос 7
В FastAPI добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def http_exception_logger(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "request_id": request.state.request_id},
    )
```
Для чего используется такой обработчик?

А) Чтобы полностью отключить стандартные ответы FastAPI
Б) Чтобы централизованно форматировать ответы об ошибках
В) Чтобы логировать только успешные ответы
Г) Чтобы скрывать все ошибки от клиента

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.



### Вопрос 8
API возвращает 500 из-за временной недоступности базы данных. Какие шаги помогут улучшить обработку ошибок и дать фронтенду понятную обратную связь? Отметь все подходящие варианты.

А) Возвращать статус 503 с сообщением о временной недоступности
Б) Скрывать ошибку и возвращать статус 200  
Д) Согласовать с фронтендом формат отображения ошибок пользователю
В) Добавить обработчик исключений, возвращающий структурированный JSON и логирующий ошибку
Г) Оставить статус 500 и возвращать пустое тело ответа

**Правильные ответы:** А, В

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.



### Вопрос 9
Как обеспечить надёжную интеграцию API и фронта? Отметь все подходящие варианты.

А) Игнорировать статусы и возвращать 200
Б) Использовать единый формат ответа (`data`, `error`)
В) Писать автоматические тесты интеграции  
Д) Логировать ошибки и добавлять идентификатор запроса
Г) Поддерживать живую документацию

**Правильные ответы:** Б, В, Г

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.



### Вопрос 10
Сервер не проверил данные формы и сохранил пустое поле `email` в базу данных. Какие последствия возможны?

А) Некорректными данными в базе и ошибками при дальнейшей обработке
Б) Ничего критического — пустая строка является валидным значением
В) Автоматической повторной отправкой формы браузером
Г) Автоматическим заполнением поля через FastAPI

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.



### Вопрос 11
В Jinja2-шаблоне используется переменная `{{ total }}`, но она не передана в контекст. Что увидит пользователь на странице?

А) FastAPI выбросит исключение при рендеринге шаблона
Б) В месте подстановки переменной будет пустая строка
В) Jinja2 автоматически подставит значение по умолчанию
Г) В шаблоне отобразится текст `{{ total }}` как есть

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.



### Вопрос 12
Какие шаги помогают организовать структуру проекта FastAPI для масштабирования? Отметь все подходящие варианты.

А) Вынести логические группы эндпоинтов в отдельные модули и подключить их через `APIRouter`
Б) Хранить все обработчики в одном файле `main.py` для простоты навигации
В) Разделить бизнес-логику, модели данных и вспомогательные функции по отдельным пакетам
Г) Настроить общие настройки приложения в отдельном модуле  
Д) Использовать один роутер для всех эндпоинтов без группировки

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.



### Вопрос 13
В коде есть декоратор `@router.get("/status")`, но функция-обработчик отсутствует. Что произойдёт при запуске приложения?

А) FastAPI автоматически создаст обработчик, возвращающий пустой ответ
Б) FastAPI подставит обработчик по умолчанию, возвращающий `{"message": "OK"}`
В) Приложение упадёт с ошибкой при запуске
Г) Эндпоинт будет игнорироваться, запросы вернут 404

**Правильный ответ:** В

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).



### Вопрос 14
HTTP-запрос состоит из нескольких элементов. Какие компоненты входят в его структуру? Отметь все подходящие варианты.

А) Заголовки
Б) Метод
В) Тело
Г) URL/путь

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).



### Вопрос 15
Внутренний портал делает `GET https://intra.company/api/kpi`, однако бэкенд вернул `502 Bad Gateway`. Как лучше уведомить пользователя?

А) Показать уведомление о временной ошибке и предложить повторить позже
Б) Перенаправить пользователя на страницу обслуживания
В) Попытаться автоматически перезагрузить страницу через таймаут
Г) Отобразить последние доступные данные без уведомления

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 16
Эндпоинт при любой ошибке возвращает статус 200 с сообщением «error». Какие изменения нужно внести, чтобы клиенты корректно обрабатывали разные сценарии? Отметь все подходящие варианты.

А) Сохранять статус 200, чтобы фронтенд не показывал ошибки пользователю
Б) Включать в ответ структурированное сообщение об ошибке
В) Возвращать статусы 4xx для ошибок клиента и 5xx для ошибок сервера
Г) Документировать возможные HTTP-статусы, которые может вернуть эндпоинт

**Правильные ответы:** Б, В, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.


### Вопрос 17
Команда переходит на micro frontends. Зачем держать фронт и бэк отдельно? Отметь все подходящие варианты.

А) Независимое масштабирование сервисов
Б) Возможность использовать технологии под задачу
В) Сокрытие бизнес-логики на сервере
Г) Оптимизация количества HTTP-запросов путём батчинга

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.



### Вопрос 18
Эндпоинт `GET /clients/{client_id}` объявлен с параметром `client_id: int`. Какой статус-код вернёт FastAPI, если клиент запросит `/clients/foo`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.



### Вопрос 19
Эндпоинт FastAPI читает данные через `request.json()`, но клиент отправил запрос с заголовком `Content-Type: application/x-www-form-urlencoded`. Что вернёт FastAPI?

А) Автоматически переключится на чтение формы через `request.form()`
Б) Вернёт 422 или 400 из-за несоответствия формата тела
В) Попытается парсить тело как JSON и вернёт ошибку парсинга
Г) Автоматически преобразует форму в JSON и продолжит обработку

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.



### Вопрос 20
Какой код используется для подключения статических файлов в FastAPI?

А) `app.mount("/static", StaticFiles(directory="staticfiles"), name="static")`
Б) `app.static("/static")`
В) `app.include_router("/static")`
Г) `app.serve_static("staticfiles")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.



### Вопрос 21
Эндпоинт `PUT /employees/{id}` успешно обновил существующую запись без тела ответа. Какой статус-код подходит? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.



### Вопрос 22
Зачем документировать контракт API перед предоставлением его партнёрам?

А) Чтобы описать схему базы данных для интеграции
Б) Чтобы ограничить доступ к API только через веб-браузеры
В) Чтобы позволить партнёрам настраивать внутреннюю логику сервиса
Г) Чтобы согласовать формат запросов и ответов и предотвратить интеграционные ошибки

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.



### Вопрос 23
Эндпоинт `POST /orders` возвращает 500. Логи показывают ошибку сериализации. Какие шаги помогут подтвердить, что проблема в валидации входящих данных? Отметь все подходящие варианты.

А) Изменить HTTP-метод на GET
Б) Перейти на формат XML вместо JSON
Д) Валидировать JSON-данные перед сохранением дополнительно
В) Проверить схемы Pydantic и добавить валидацию входных данных
Г) Повторять запросы до успешного выполнения

**Правильные ответы:** В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.



### Вопрос 24
Фронтенд получает `308 Permanent Redirect` на `/signin`. Что это значит?

А) Клиент обратился к неверному домену
Б) База недоступна
В) Пользователь должен авторизоваться заново
Г) Сервер рестартится

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 25
Проект — мобильное приложение + REST API. Какие задачи относятся к бэкенду? Отметь все подходящие варианты.

А) Хранение и обработка данных
Б) Проверка прав доступа
В) Динамическая генерация HTML на сервере
Г) Валидация форм на стороне клиента

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.



### Вопрос 26
Назови три HTTP-метода, которые используются для чтения данных. Напиши их через запятую.

**Правильный ответ:** `GET, HEAD, OPTIONS` (принимаются комбинации с `GET, HEAD` и др.)

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

