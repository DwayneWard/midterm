# Теоретическая часть контрольной работы. Вариант 4
## Разработка на Python. Углублённый

### Вопрос 1
Внутренний портал делает `GET https://intra.company/api/kpi`, однако бэкенд вернул `502 Bad Gateway`. Как лучше уведомить пользователя?

А) Показать уведомление о временной ошибке и предложить повторить позже  
Б) Молча оставить прошлые данные  
В) Перезагрузить страницу без пояснения  
Г) Вместо ошибки сразу разлогинить пользователя

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 2
Проект — мобильное приложение + REST API. Какие задачи относятся к бэкенду? Отметь все подходящие варианты.

А) Проверка прав доступа  
Б) Управление стилями интерфейса  
В) Хранение и обработка данных  
Г) Рендера UI в браузере

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.

### Вопрос 3
Команда переходит на micro frontends. Зачем держать фронт и бэк отдельно? Отметь все подходящие варианты.

А) Независимое масштабирование сервисов  
Б) Возможность использовать технологии под задачу  
В) Сокрытие бизнес-логики на сервере  
Г) Сокращение количества HTTP-запросов

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.

### Вопрос 4
На доске изображён HTTP-запрос. Какие элементы входят в него? Отметь все подходящие варианты.

А) Метод  
Б) URL/путь  
В) Заголовки  
Г) Тело

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 5
Планируется предоставить API партнёрам. Зачем документировать контракт заранее?

А) Чтобы согласовать формат запросов/ответов и предотвратить интеграционные ошибки  
Б) Чтобы заменить базу данных  
В) Чтобы партнёры могли менять внутреннюю реализацию сервиса  
Г) Чтобы все пользователи работали только через браузер

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

### Вопрос 6
Назови три HTTP-метода, которые используются для чтения данных. Напиши их через запятую.

**Правильный ответ:** `GET, HEAD, OPTIONS` (принимаются комбинации с `GET, HEAD` и др.)

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 7
Вы запускаете публичный REST API. Что следует согласовать между командами? Отметь все подходящие варианты.

А) Структуру JSON и коды ошибок  
Б) Общую схему базы без API  
В) Версионирование и политику совместимости  
Г) Идентификаторы корреляции для логирования

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Знает. - Основную роль API в клиент-серверном взаимодействии.

### Вопрос 8
Вы разворачиваете FastAPI с помощью `pipenv`. Как установить зависимости?

**Правильный ответ:** `pipenv install fastapi "uvicorn[standard]"` (принимаются эквивалентные варианты)

**Проверяемый ОР:** Знает. - Как устанавливать и запускать FastAPI.

### Вопрос 9
К teammate пришёл фрагмент:
```python
service_router = APIRouter()
service_router.get("/status")
```
Обработчика нет. Что случится при запуске?

А) FastAPI добавит заглушку  
Б) Приложение упадёт с ошибкой  
В) Эндпоинт вернёт пустой словарь  
Г) Декоратор просто игнорируется

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).

### Вопрос 10
В API нужно принимать параметр `category` из query-строки. Какие сигнатуры подойдут? Отметь все подходящие варианты.

А) `def list_items(category: str | None = None)`  
Б) `def list_items(category: str = Query(None))`  
В) `def list_items(category: str = Path(...))`  
Г) `def list_items(category: Request)`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.

### Вопрос 11
Эндпоинт `@app.get("/clients/{client_id}")` принимает `client_id: int`. Какой статус вернёт FastAPI на `/clients/foo`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.

### Вопрос 12
Какой путь откроешь, чтобы получить JSON со схемой OpenAPI? Напиши путь.

**Правильный ответ:** `/openapi.json`

**Проверяемый ОР:** Знает. - Как FastAPI генерирует документацию API (Swagger, Redoc).

### Вопрос 13
Микросервис разросся. Какие шаги помогут структурировать FastAPI-приложение? Отметь все подходящие варианты.

А) Разбить обработчики по модулям и подключать их через `APIRouter`  
Б) Вынести бизнес-логику и репозитории в отдельные пакеты  
В) Держать всё в одном `main.py`, чтобы быстрее редактировать  
Г) Организовать общие настройки и зависимости отдельно

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.

### Вопрос 14
В сервисе `inventory` нужно реализовать CRUD. Соотнеси операции и методы. Отметь все подходящие соответствия.

А) Создать запись → POST  
Б) Получить запись → GET  
В) Полностью обновить → PUT  
Г) Частично обновить → PATCH  
Д) Удалить → DELETE  
Е) Проверить доступность → TRACE

**Правильные ответы:** А, Б, В, Г, Д

**Проверяемый ОР:** Знает. - Принципы реализации CRUD-операций в рамках REST API.

### Вопрос 15
Клиент отправляет форму, а сервер вызывает `await request.json()`. Какую ошибку вернёт FastAPI?

А) Не вернёт — форма преобразуется автоматически  
Б) Вернёт 422 или 400  
В) Вернёт пустой ответ  
Г) Сделает запрос GET

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

### Вопрос 16
Перед релизом JSON API для аналитики вы обсуждаете контракт с фронтендом. Какие требования важны? Отметь все подходящие варианты.

А) Указывать `Content-Type: application/json`  
Б) Соблюдать единый формат тела  
В) Вставлять SQL-дампы в ответ  
Г) Документировать контракт  
Д) Возвращать понятные сообщения об ошибках

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 17
После релиза `POST /orders` стал возвращать 500 при некорректных данных. Какие шаги помогут локализовать ошибку валидации? Отметь все подходящие варианты.

А) Перезапросить до успеха  
Б) Пересмотреть схемы Pydantic и добавить проверки  
В) Логировать тело запроса, выделяя проблемные поля  
Г) Заменить POST на GET  
Д) Перейти на XML

**Правильные ответы:** Б, В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 18
Эндпоинт `PUT /employees/{id}` завершился успехом и не возвращает тело. Какой статус отправишь? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.

### Вопрос 19
Нужно вернуть HTML-шаблон `summary.html` с данными `stats`. Какие шаги обязательны? Отметь все подходящие варианты.

А) Вызывать `TemplateResponse("summary.html", {"request": request, "stats": stats})`  
Б) Передавать контекст словарём  
В) Использовать глобальную переменную `stats`  
Г) Исключить `request` из контекста

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.

### Вопрос 20
Как подключить выдачу статики из папки `staticfiles`?

А) `app.mount("/static", StaticFiles(directory="staticfiles"), name="static")`  
Б) `app.static("/static")`  
В) `app.include_router("/static")`  
Г) `app.serve_static("staticfiles")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.

### Вопрос 21
В шаблоне используется `{{ total }}`, но значение не передали. Что увидит пользователь?

А) Приложение упадёт  
Б) Пустое место  
В) Строку `{{ total }}`  
Г) Автоматически подставится 0

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.

### Вопрос 22
Форма отправила пустой `email`, и сервер сохранил запись без проверки. Чего ожидать?

А) Всё корректно, пустые значения допустимы  
Б) Ошибок в дальнейшем и некорректных пользовательских данных  
В) Автоматического заполнения email  
Г) Перезапроса формы браузером

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.

### Вопрос 23
Какие данные HTML-форма может передать без дополнительных обёрток? Отметь все подходящие варианты.

А) Текстовые поля  
Б) Числовые значения  
В) Файлы (с `multipart/form-data`)  
Г) Нативный JSON

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.

### Вопрос 24
На тестовой среде пользователь видит `500 Internal Server Error`, потому что поле `count` не преобразовалось в число. Что нужно сделать?

А) Убрать поле `count`  
Б) Добавить серверную валидацию  
В) Сменить метод на GET  
Г) Вернуть понятное сообщение об ошибке  
Д) Игнорировать ошибку и возвращать 200

**Правильные ответы:** Б, Г

**Проверяемый ОР:** Понимает. - Почему важно проводить валидацию и фильтрацию пользовательского ввода для защиты серверной логики и данных.

### Вопрос 25
Как обеспечить надёжную интеграцию API и фронта? Отметь все подходящие варианты.

А) Использовать единый формат ответа (`data`, `error`)  
Б) Поддерживать живую документацию  
В) Игнорировать статусы и возвращать 200  
Г) Писать автоматические тесты интеграции  
Д) Логировать ошибки и добавлять идентификатор запроса

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.

### Вопрос 26
Клиент запросил `/shipments/12345`, но такого ресурса нет. Какой статус вернёшь? Напиши число.

**Правильный ответ:** `404`

**Проверяемый ОР:** Знает. - Какие бывают типы ошибок в API (400, 404, 500 и др.).

### Вопрос 27
Команда договорилась: ответ об ошибке должен содержать три ключевых поля. Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются альтернативные названия вроде `status, error, info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 28
В логах много 500 из-за кратковременной перегрузки базы. Что предпримешь на бэкенде? Отметь все подходящие варианты.

А) Добавить обработчик исключений, возвращающий JSON и логирующий ошибку  
Б) Оставлять 500 без тела  
В) Возвращать 503 с описанием проблемы  
Г) Прятать ошибки за 200  
Д) Договориться с фронтом, как отображать такие ошибки

**Правильные ответы:** А, В, Д

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 29
Postman показывает:
```json
{
  "detail": [
    {"loc": ["body", "price"], "msg": "value is not a valid decimal"}
  ]
}
```
Это означает, что…

А) Клиент отправил некорректное поле `price`  
Б) Сервер FastAPI упал  
В) Прокси изменил тело ответа  
Г) Вернулась HTML-страница

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).

### Вопрос 30
В проекте добавили обработчик:
```python
@app.exception_handler(HTTPException)
async def http_exception_logger(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "request_id": request.state.request_id},
    )
```
Для чего он нужен?

А) Чтобы унифицировать сообщения об ошибках и трассировать запросы  
Б) Чтобы скрыть ошибки  
В) Чтобы логировать только удачные ответы  
Г) Чтобы заменить FastAPI собственным сервером

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 31
Фронтенд получает `308 Permanent Redirect` на `/signin`. Что это значит?

А) Клиент обратился к неверному домену  
Б) Пользователь должен авторизоваться заново  
В) Сервер рестартится  
Г) База недоступна

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 32
UI игнорирует ответы 422 и продолжает отправлять некорректные данные. Что посоветуешь?

А) Игнорировать 422, чтобы не мешать  
Б) Переадресовывать на главную  
В) Показывать ошибки валидации и давать исправить  
Г) Заменить метод на PUT

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 33
Эндпоинт `/api/payments` при любой ошибке возвращает 200 с текстом «error». Какие шаги нужны, чтобы клиенты корректно реагировали на сценарии? Отметь все подходящие варианты.

А) Возвращать релевантные статусы 4xx/5xx  
Б) Формировать структурированный JSON о проблеме  
В) Оставить 200, чтобы фронт не показывал алертов  
Г) Задокументировать возможные статусы

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 34
Фронтенд ожидает `{ "data": {...} }`, а API возвращает `{ "payload": {...} }`. Чем это грозит?

А) Клиент не найдёт поле и покажет ошибку  
Б) Браузер автоматически переименует ключ  
В) Сервер подстроит ответ под клиента  
Г) Ошибка исчезнет при следующем запросе

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

