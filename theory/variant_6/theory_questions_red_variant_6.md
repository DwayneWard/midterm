# Теоретическая часть контрольной работы. Вариант 6
## Разработка на Python. Углублённый

### Вопрос 1
Какие типы данных могут передаваться через HTML-формы по умолчанию? Отметь все подходящие варианты.

А) Числовые значения
Б) Текстовые строки
В) Файлы (с `multipart/form-data`)
Г) JSON-объекты без дополнительной сериализации

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.



### Вопрос 2
Какие шаги необходимы для передачи данных в Jinja2-шаблон в FastAPI? Отметь все подходящие варианты.

А) Передать данные через словарь в параметр `context`
Б) Вызвать `templates.TemplateResponse("overview.html", {"request": request, "summary": summary})`
В) Использовать глобальные переменные вместо контекста
Г) Оставить шаблон без данных — они подставятся автоматически

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI.



### Вопрос 3
Эндпоинт должен принимать query-параметр `limit` из URL `/items?limit=10`. Какие объявления параметра функции-обработчика подходят? Отметь все подходящие варианты.

А) `def list_items(limit: int | None = None)`
Б) `def list_items(limit: int = Query(default=10))`
В) `def list_items(limit: int = "/items?limit")`
Г) `def list_items(limit: int = Path(...))`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.



### Вопрос 4
Эндпоинт `GET /users/{user_id}` объявлен с параметром `user_id: int`. Какой статус-код вернёт FastAPI, если клиент запросит `/users/admin`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.



### Вопрос 5
Какие шаги необходимы для обеспечения корректной обработки JSON-ответов API клиентом? Отметь все подходящие варианты.

А) Документировать API-контракт в Swagger/OpenAPI  
Д) Возвращать ошибки с описанием проблемных полей
Б) Указывать заголовок `Content-Type: application/json`
В) Добавлять подробные логи сервера в тело ответа для отладки
Г) Использовать единый формат тела ответа, например `{ "data": ... }`

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.



### Вопрос 6
В FastAPI добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def http_handler(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "request_id": request.state.request_id},
    )
```
Для чего используется такой обработчик?

А) Чтобы скрывать все ошибки от клиента
Б) Чтобы логировать только успешные ответы
В) Чтобы централизованно форматировать ответы об ошибках и добавлять идентификатор запроса
Г) Чтобы полностью отключить стандартные ответы FastAPI

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.



### Вопрос 7
Сервер не проверил данные формы и сохранил пустое поле `email` в базу данных. Какие последствия возможны?

А) Автоматическим заполнением поля через FastAPI
Б) Ничего критического — пустая строка является валидным значением
В) Некорректными данными в базе и ошибками при дальнейшей обработке
Г) Автоматической повторной отправкой формы браузером

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.



### Вопрос 8
Эндпоинт `POST /clients` возвращает 500. Логи показывают ошибку сериализации. Какие шаги помогут подтвердить, что проблема в валидации входящих данных? Отметь все подходящие варианты.

А) Перейти на формат XML вместо JSON
Д) Валидировать JSON-данные перед сохранением дополнительно
Б) Изменить HTTP-метод на GET
В) Проверить схемы Pydantic и добавить валидацию входных данных
Г) Повторять запросы до успешного выполнения

**Правильные ответы:** В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.



### Вопрос 9
Из каких компонентов состоит HTTP-запрос? Отметь все подходящие варианты.

А) Заголовки
Б) Метод
В) Путь / URL
Г) Тело (если нужно)

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).



### Вопрос 10
В Jinja2-шаблоне используется переменная `{{ total }}`, но она не передана в контекст. Что увидит пользователь на странице?

А) Jinja2 автоматически подставит значение по умолчанию
Б) FastAPI выбросит исключение при рендеринге шаблона
В) В шаблоне отобразится текст `{{ total }}` как есть
Г) В месте подстановки переменной будет пустая строка

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.



### Вопрос 11
Какой код используется для подключения статических файлов в FastAPI?

А) `app.mount("/assets", StaticFiles(directory="assets"), name="assets")`
Б) `app.static("/assets")`
В) `app.include_router("/assets")`
Г) `app.serve_static("assets")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами.



### Вопрос 12
Назови три HTTP-метода, которые чаще всего используют для обновления или удаления данных. Напиши их через запятую.

**Правильный ответ:** `PUT, PATCH, DELETE`

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).



### Вопрос 13
Фронтенд дашборда вызывает `GET /api/metrics`, но API возвращает `429 Too Many Requests`. Что стоит сделать на клиенте?

А) Отобразить последние доступные данные с предупреждением
Б) Перенаправить пользователя на страницу с информацией о лимитах
В) Автоматически снизить частоту запросов без уведомления
Г) Показать сообщение о лимите и предложить повторить позже

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 14
Какие шаги помогают организовать структуру проекта FastAPI для масштабирования? Отметь все подходящие варианты.

А) Хранить все обработчики в одном файле `main.py` для простоты навигации
Б) Вынести логические группы эндпоинтов в отдельные модули и подключить их через `APIRouter`
В) Разделить бизнес-логику, модели данных и вспомогательные функции по отдельным пакетам
Г) Настроить общие настройки приложения в отдельном модуле  
Д) Использовать один роутер для всех эндпоинтов без группировки

**Правильные ответы:** Б, В, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.



### Вопрос 15
Эндпоинт `PUT /profiles/{id}` успешно обновил существующую запись без тела ответа. Какой статус-код подходит? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.



### Вопрос 16
Эндпоинт при любой ошибке возвращает статус 200 с сообщением «error». Какие изменения нужно внести, чтобы клиенты корректно обрабатывали разные сценарии? Отметь все подходящие варианты.

А) Сохранять статус 200, чтобы фронтенд не показывал ошибки пользователю
Б) Включать в ответ структурированное сообщение об ошибке
В) Документировать возможные HTTP-статусы, которые может вернуть эндпоинт
Г) Возвращать статусы 4xx для ошибок клиента и 5xx для ошибок сервера

**Правильные ответы:** Б, В, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.


### Вопрос 17
При переходе от монолита к micro frontends и microservices зачем держать фронтенд и бэкенд отдельно? Отметь все подходящие варианты.

А) Защитить бизнес-логику на сервере
Б) Масштабировать сервисы независимо
В) Использовать разные технологические стеки под задачу
Г) Оптимизировать количество HTTP-запросов за счёт кеширования

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.



### Вопрос 18
Сервис — SPA, бэкенд на FastAPI. Какие обязанности остаются за бэком? Отметь все подходящие варианты.

А) Серверный рендеринг компонентов интерфейса
Б) Хранение данных и интеграции
В) Проверка прав и бизнес-логика
Г) Управление состоянием компонентов на клиенте

**Правильные ответы:** Б, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.



### Вопрос 19
Какие три ключевых поля должны быть включены в структурированный JSON-ответ об ошибке? Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются аналоги `status, error, info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 20
API вернул ответ:
```json
{
  "detail": [
    {"loc": ["body", "quantity"], "msg": "value is not a valid integer"}
  ]
}
```
Что означает такой ответ?

А) Ошибка сервера FastAPI
Б) Ошибка клиента (некорректные данные в запросе)
В) Это HTML-страница
Г) Ответ сгенерирован промежуточным прокси

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).



### Вопрос 21
В коде есть декоратор `@router.get("/ping")`, но функция-обработчик отсутствует. Что произойдёт при запуске приложения?

А) FastAPI подставит обработчик по умолчанию, возвращающий `{"message": "OK"}`
Б) FastAPI автоматически создаст обработчик, возвращающий пустой ответ
В) Приложение упадёт с ошибкой при запуске
Г) Эндпоинт будет игнорироваться, запросы вернут 404

**Правильный ответ:** В

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).



### Вопрос 22
Зачем формально описывать контракт API при интеграции с партнёрами?

А) Чтобы упростить создание тестовых сценариев
Б) Чтобы ограничить интеграцию только веб-приложениями
В) Чтобы определить схему базы данных для партнёров
Г) Чтобы все клиенты работали по единому формату запросов и ответов

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.



### Вопрос 23
Как обеспечить надёжную интеграцию API и фронта? Отметь все подходящие варианты.

А) Всегда отвечать 200
Б) Поддерживать документацию и синхронизацию версий
В) Писать интеграционные тесты  
Д) Логировать ошибки и добавлять идентификатор запроса
Г) Использовать единый формат `{ "data": ..., "error": ... }`

**Правильные ответы:** Б, В, Г

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.



### Вопрос 24
API возвращает 500 из-за временной недоступности базы данных. Какие шаги помогут улучшить обработку ошибок и дать фронтенду понятную обратную связь? Отметь все подходящие варианты.

А) Оставить статус 500 и возвращать пустое тело ответа
Б) Скрывать ошибку и возвращать статус 200  
Д) Согласовать с фронтендом формат отображения ошибок пользователю
В) Добавить обработчик исключений, возвращающий структурированный JSON и логирующий ошибку
Г) Возвращать статус 503 с сообщением о временной недоступности

**Правильные ответы:** В, Г

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.



### Вопрос 25
Фронтенд получает `302` на `/login`. Что произошло?

А) Сервер перезагружается
Б) Клиент стучится на неверный домен
В) База данных недоступна
Г) Сессия пользователя истекла

**Правильный ответ:** Г

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.



### Вопрос 26
Эндпоинт FastAPI читает данные через `request.json()`, но клиент отправил запрос с заголовком `Content-Type: application/x-www-form-urlencoded`. Что вернёт FastAPI?

А) Автоматически преобразует форму в JSON и продолжит обработку
Б) Автоматически переключится на чтение формы через `request.form()`
В) Вернёт 422 или 400 из-за несоответствия формата тела
Г) Попытается парсить тело как JSON и вернёт ошибку парсинга

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

