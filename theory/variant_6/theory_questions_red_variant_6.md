# Теоретическая часть контрольной работы. Вариант 6
## Разработка на Python. Углублённый

### Вопрос 1
Фронтенд дашборда вызывает `GET /api/metrics`, но API возвращает `429 Too Many Requests`. Что стоит сделать на клиенте?

А) Показать сообщение о лимите и предложить повторить позже  
Б) Продолжать показывать старые данные без уведомления  
В) Сразу перелогинить пользователя  
Г) Прервать сессию и очистить кеш браузера

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 2
Сервис — SPA, бэкенд на FastAPI. Какие обязанности остаются за бэком? Отметь все подходящие варианты.

А) Проверка прав и бизнес-логика  
Б) Отрисовка интерфейса и CSS  
В) Хранение данных и интеграции  
Г) Управление анимациями

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.

### Вопрос 3
Команда делит монолит на micro frontends и microservices. Зачем держать фронт и бэк отдельно? Отметь все подходящие варианты.

А) Масштабировать команды и сервисы независимо  
Б) Использовать разные стеки под задачу  
В) Защитить бизнес-правила на сервере  
Г) Уменьшить сеть до одного HTTP-запроса в день

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.

### Вопрос 4
Стажёр спрашивает, из чего состоит HTTP-запрос. Что перечислишь? Отметь все подходящие варианты.

А) Метод  
Б) Путь / URL  
В) Заголовки  
Г) Тело (если нужно)

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 5
Интеграция с партнёрами начинается через API. Зачем формально описывать контракт?

А) Чтобы все клиенты работали по одному формату запросов и ответов  
Б) Чтобы API заменил базу данных  
В) Чтобы заставить всех работать только через браузер  
Г) Чтобы не писать авто-тесты

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

### Вопрос 6
Назови три HTTP-метода, которые чаще всего используют для обновления или удаления данных. Напиши их через запятую.

**Правильный ответ:** `PUT, PATCH, DELETE`

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 7
Готовится публичный API. Что стоит согласовать между командами? Отметь все подходящие варианты.

А) Формат JSON и коды ошибок  
Б) Общий доступ к базе без API  
В) Правила версионирования и совместимости  
Г) Стандарты логирования и trace-id

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Знает. - Основную роль API в клиент-серверном взаимодействии.

### Вопрос 8
Вы ставите FastAPI через `poetry`. Как установить зависимости?

**Правильный ответ:** `poetry add fastapi "uvicorn[standard]"` (принимаются эквиваленты)

**Проверяемый ОР:** Знает. - Как устанавливать и запускать FastAPI.

### Вопрос 9
В коде остался декоратор:
```python
router = APIRouter()
router.get("/ping")
```
Обработчик забыли. Что произойдёт при запуске?

А) FastAPI создаст заглушку  
Б) Приложение упадёт  
В) Эндпоинт вернёт пустой ответ  
Г) Декоратор проигнорируется

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).

### Вопрос 10
Нужно принимать `limit` через query-параметр. Какие сигнатуры подходят? Отметь все подходящие варианты.

А) `def list_items(limit: int | None = None)`  
Б) `def list_items(limit: int = Query(default=10))`  
В) `def list_items(limit: int = Path(...))`  
Г) `def list_items(limit: Request)`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.

### Вопрос 11
Эндпоинт `@app.get("/users/{user_id}")` объявлен с типом `user_id: int`. Какой статус вернёт FastAPI на `/users/admin`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.

### Вопрос 12
Какой URL использует FastAPI для выдачи JSON схемы OpenAPI? Напиши путь.

**Правильный ответ:** `/openapi.json`

**Проверяемый ОР:** Знает. - Как FastAPI генерирует документацию API (Swagger, Redoc).

### Вопрос 13
Проект на FastAPI растёт. Какие шаги помогают поддерживать структуру? Отметь все подходящие варианты.

А) Разбить эндпоинты по модулям и подключать их через `APIRouter`  
Б) Вынести бизнес-логические слои и модели в отдельные пакеты  
В) Держать весь код в `main.py`  
Г) Настроить конфигурацию и зависимости в отдельном модуле

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.

### Вопрос 14
Ресурс `returns` должен поддерживать CRUD. Соотнеси операции и методы. Отметь все подходящие соответствия.

А) Создать возврат → POST  
Б) Получить возврат → GET  
В) Удалить → DELETE  
Г) Полностью обновить → PUT  
Д) Частично обновить → PATCH  
Е) Получить список → OPTIONS

**Правильные ответы:** А, Б, В, Г, Д

**Проверяемый ОР:** Знает. - Принципы реализации CRUD-операций в рамках REST API.

### Вопрос 15
Фронтенд отправил форму, а сервер вызывает `await request.json()`. Какой статус вероятнее всего вернёт FastAPI?

А) 200  
Б) 204  
В) 400/422  
Г) 500

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

### Вопрос 16
Ты проектируешь JSON API для мобильного приложения и согласуешь контракт с фронтендом. Что важно учесть? Отметь все подходящие варианты.

А) `Content-Type: application/json`  
Б) Единый формат тела (например, `{ "data": ... }`)  
В) Сырые логи в ответ не добавлять  
Г) Документировать контракт  
Д) Возвращать ошибки с информацией о полях

**Правильные ответы:** А, Б, В, Г, Д

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 17
После релиза `POST /clients` иногда даёт 500 при некорректном JSON. Как убедиться, что проблема именно в валидации? Отметь все подходящие варианты.

А) Повторять запросы до успеха  
Б) Проверить схемы Pydantic и добавить валидацию  
В) Логировать тело запроса и выделять проблемные поля  
Г) Перейти на XML  
Д) Заменить метод на GET

**Правильные ответы:** Б, В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 18
`PUT /profiles/{id}` завершился без тела. Какой статус отправишь? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.

### Вопрос 19
Нужно отрендерить `overview.html` с данными `summary`. Что обязательно сделать? Отметь все подходящие варианты.

А) `TemplateResponse("overview.html", {"request": request, "summary": summary})`  
Б) Передать контекст словарём  
В) Использовать глобальную переменную  
Г) Не передавать `request`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI.

### Вопрос 20
Как подключить статику из папки `assets`?

А) `app.mount("/assets", StaticFiles(directory="assets"), name="assets")`  
Б) `app.static("/assets")`  
В) `app.include_router("/assets")`  
Г) `app.serve_static("assets")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами.

### Вопрос 21
В шаблоне выводится `{{ total }}`, но значение не передали. Что увидит пользователь?

А) Ошибка сервера  
Б) Пустое место  
В) Строку `{{ total }}`  
Г) Значение по умолчанию

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.

### Вопрос 22
Форма отправила пустой `email`, а сервер принял запрос. Чего стоит опасаться?

А) Ничего страшного  
Б) Ошибок в аналитике и обратной связи  
В) FastAPI заполнит значение автоматически  
Г) Браузер повторит запрос

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.

### Вопрос 23
Какие типы данных HTML-форма передаёт без JSON? Отметь все подходящие варианты.

А) Строки  
Б) Числа  
В) Файлы  
Г) Сырые JSON-объекты

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.

### Вопрос 24
Пользователь жалуется на `500 Internal Server Error`: `ValueError` при преобразовании `count` в число. Что нужно сделать?

А) Убрать поле  
Б) Добавить серверную валидацию  
В) Заменить POST на GET  
Г) Вернуть понятное сообщение об ошибке  
Д) Игнорировать ошибку

**Правильные ответы:** Б, Г

**Проверяемый ОР:** Понимает. - Почему важно проводить валидацию и фильтрацию пользовательского ввода для защиты серверной логики и данных.

### Вопрос 25
Как обеспечить надёжную интеграцию API и фронта? Отметь все подходящие варианты.

А) Использовать единый формат `{ "data": ..., "error": ... }`  
Б) Поддерживать документацию и синхронизацию версий  
В) Всегда отвечать 200  
Г) Писать интеграционные тесты  
Д) Логировать ошибки и добавлять идентификатор запроса

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.

### Вопрос 26
Фронтенд запросил несуществующий ресурс `GET /devices/9999`. Какой статус вернёшь? Напиши число.

**Правильный ответ:** `404`

**Проверяемый ОР:** Знает. - Какие бывают типы ошибок в API (400, 404, 500 и др.).

### Вопрос 27
Ошибка API должна содержать три обязательных поля. Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются аналоги `status, error, info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 28
Сервер выводит серию 500 из-за перегруженной базы. Какие меры предпримешь? Отметь все подходящие варианты.

А) Добавить обработчик, возвращающий структурированный JSON  
Б) Оставить 500 без тела  
В) Возвращать 503 с описанием проблемы  
Г) Прятать ошибку за 200  
Д) Согласовать отображение с фронтендом

**Правильные ответы:** А, В, Д

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 29
Ответ сервера:
```json
{
  "detail": [
    {"loc": ["body", "quantity"], "msg": "value is not a valid integer"}
  ]
}
```
Как его интерпретировать?

А) Клиент передал некорректное поле `quantity`  
Б) Сервер FastAPI упал  
В) Прокси изменил ответ  
Г) Это HTML-страница

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).

### Вопрос 30
В проекте добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def http_handler(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "request_id": request.state.request_id},
    )
```
Для чего он используется?

А) Чтобы унифицировать ответы об ошибках и делать трассировку запросов  
Б) Чтобы скрывать ошибки  
В) Чтобы логировать только успехи  
Г) Чтобы обойти встроенные ответы FastAPI

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 31
Фронтенд получает `302` на `/login`. Что произошло?

А) Клиент стучится на неверный домен  
Б) Сессия пользователя истекла  
В) Сервер перезагружается  
Г) База данных недоступна

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 32
Фронтенд игнорирует ответы 422. Что стоит сделать? Отметь все подходящие варианты.

А) Продолжать игнорировать  
Б) Переадресовать пользователя на главную  
В) Показать ошибки валидации и дать исправить  
Г) Менять метод на PUT

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 33
Эндпоинт `/api/reports` при любой ошибке возвращает 200 с текстом «error». Какие шаги нужны, чтобы клиенты корректно реагировали на сценарии? Отметь все подходящие варианты.

А) Возвращать корректные статусы 4xx/5xx  
Б) Формировать структурированный JSON с описанием  
В) Оставить 200  
Г) Документировать допустимые статусы для клиентов

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 34
Фронтенд ждёт `{ "data": {...} }`, а сервер отвечает `{ "payload": {...} }`. Чем это грозит?

А) Клиент не найдёт данные и покажет ошибку  
Б) Браузер сам переименует ключ  
В) Сервер адаптирует ответ  
Г) Ошибка исчезнет на следующем запросе

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

