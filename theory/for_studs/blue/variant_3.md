# Теоретическая часть контрольной работы
## Вариант 3

**Дисциплина:** Разработка на Python. Основной

**Фамилия, Имя:** _________________________________

---

### Вопрос 1
Разработчик работает над фичей в ветке `feature/notifications`, пока в `main` появились новые коммиты. Нужно синхронизировать ветку с актуальной версией `main` и сохранить линейную историю для упрощения ревью. Как правильно организовать процесс синхронизации?

- [ ] Выполнить `git merge origin/main` в ветке `feature/notifications`, чтобы создать merge-коммит без предварительного fetch
- [ ] Выполнить `git fetch`, переключиться в `main`, сделать `git pull`, затем вернуться в `feature/notifications` и выполнить `git merge main`
- [ ] Выполнить `git fetch`, остаться в `feature/notifications` и выполнить `git rebase origin/main`, чтобы переписать коммиты поверх актуальной истории `main`
- [ ] Выполнить `git pull` в ветке `feature/notifications`, чтобы автоматически объединить изменения через merge-коммит

### Вопрос 2
После `git pull` ты видишь сообщение `CONFLICT (content): Merge conflict in settings.py`. Какие действия приведут к корректному завершению merge? Отметь все подходящие варианты.

- [ ] Закоммитить изменения после `git add`
- [ ] Вызвать `git merge --abort`, если нужно откатить merge
- [ ] Сделать `git reset --hard origin/main` и продолжить merge
- [ ] Разрешить конфликты вручную и выполнить `git add settings.py`

### Вопрос 3
Разработчик обнаружил, что в репозиторий попал файл `secrets.env` с секретными данными. Нужно удалить файл из отслеживания Git и предотвратить его повторное попадание в репозиторий. Как правильно организовать процесс?

- [ ] Использовать `git stash` для временного сохранения файла, затем `git clean`
- [ ] Удалить файл из рабочей директории командой `rm secrets.env`, перезапустить Git
- [ ] Выполнить `git reset --hard HEAD~1`, чтобы откатить последний коммит
- [ ] Удалить файл из индекса командой `git rm --cached secrets.env`, добавить `secrets.env` в `.gitignore`, закоммитить изменения

### Вопрос 4
В GitLab нужно настроить репозиторий для работы по SSH с нового ноутбука. Какие шаги обязательны?

- [ ] Добавить публичный ключ в профиль GitLab
- [ ] Сгенерировать пару ключей `ssh-keygen`
- [ ] Проверить соединение командой `ssh -T git@git.culab.ru`
- [ ] Создать персональный токен в настройках GitLab

### Вопрос 5
Коллега просит создать ветку `hotfix/login` для срочного исправления бага и сразу переключиться на неё. Напиши команду, которая создаст новую ветку и переключит рабочее дерево на неё.

**Ответ:**

_________________________________


### Вопрос 6
Фронтенд отправляет `POST /api/orders` для создания нового заказа, сервер отвечает `201 Created` и заголовком `Location: /api/orders/123`. Нужно правильно обработать ответ сервера. Что должен сделать клиент?

- [ ] Игнорировать заголовок `Location` и считать, что заказ создан без дополнительных действий
- [ ] Повторить POST-запрос, чтобы убедиться, что заказ создан
- [ ] Отправить DELETE-запрос на URL из заголовка `Location`, чтобы удалить созданный заказ
- [ ] Извлечь URL из заголовка `Location` и использовать его для получения или обновления созданного ресурса

### Вопрос 7
Разработчик проектирует REST API для управления задачами. Нужно получить список всех задач. Какой HTTP-метод и URI соответствуют принципам REST?

- [ ] PUT `/api/tasks` — использовать PUT для получения списка
- [ ] POST `/api/tasks` с телом `{"action": "list"}` — использовать POST для получения списка
- [ ] GET `/api/tasks` — использовать GET для получения коллекции ресурсов
- [ ] GET `/api/tasks/list` — использовать GET с явным указанием действия в пути

### Вопрос 8
Разработчик отправляет `GET /api/profile?fields=name,email`. Какие элементы относятся к запросу? Отметь все подходящие варианты.

- [ ] Query-параметр `fields`
- [ ] Путь `/api/profile`
- [ ] Статус-код ответа `200 OK`
- [ ] Метод `GET`

### Вопрос 9
На стенде тестирования Postman показывает `500 Internal Server Error`. Нужно понять причину ошибки и правильно организовать процесс диагностики. Какие гипотезы проверишь первыми? Отметь все подходящие варианты.

- [ ] Попробовать отправить тот же запрос через другой HTTP-метод, чтобы обойти ошибку
- [ ] Логи сервера на наличие исключений и ошибок выполнения
- [ ] Корректность тела запроса и заголовков, которые могли вызвать ошибку на сервере
- [ ] Наличие временных ограничений или таймаутов, которые могли привести к ошибке

### Вопрос 10
Разработчик отправляет форму с файлом `report.csv` и полем `email` через `requests.post`. После отправки сервер возвращает ошибку, что файл не получен. Нужно понять причину и правильно организовать процесс формирования запроса с файлом и текстовыми данными. Какой способ корректно передаст и файл, и текстовое поле в формате multipart/form-data?

- [ ] `requests.post(url, json={"report": open("report.csv", "rb"), "email": user})` — использовать `json` для файла и текстовых полей, библиотека автоматически сериализует данные
- [ ] `requests.post(url, files={"report": open("report.csv", "rb")}, data={"email": user})` — использовать `files` для файла и `data` для текстовых полей, библиотека автоматически установит правильный заголовок
- [ ] `requests.post(url, data={"report": open("report.csv", "rb"), "email": user})` — использовать только `data` для файла и текстовых полей, библиотека автоматически определит формат
- [ ] `requests.post(url, params={"report": open("report.csv", "rb"), "email": user})` — использовать `params` для файла и текстовых полей, данные будут переданы в URL

### Вопрос 11
API вернул JSON:
```json
{"meta": {"total": 2}, "items": [{"id": 10}, {"id": 11}]}
```
Напиши выражение на Python, чтобы получить `11` из объекта `data`.

**Ответ:**

_________________________________


### Вопрос 12
Разработчик тестирует API в Postman и получает `400 Bad Request` на POST-запрос. Нужно понять причину ошибки и правильно организовать процесс диагностики. Какие шаги помогут выявить проблему? Отметь все подходящие варианты.

- [ ] Изменить HTTP-метод на GET, чтобы обойти ошибку
- [ ] Убедиться, что все обязательные поля присутствуют в теле запроса
- [ ] Проверить корректность формата JSON в теле запроса
- [ ] Проверить правильность типов данных для каждого поля

### Вопрос 13
Проект упёрся в проблему: модуль `analytics` импортирует `tasks`, а `tasks` импортирует `analytics`. Что произойдёт при запуске и как это исправить?

- [ ] Возникнет циклический импорт; нужно вынести общую логику в отдельный модуль
- [ ] Python автоматически обнаружит цикл и загрузит модули в правильном порядке, всё будет работать
- [ ] Можно переместить импорт внутрь функции, где он используется, чтобы отложить загрузку модуля
- [ ] Модули загрузятся дважды в разных контекстах, но программа выполнится

### Вопрос 14
Проект разделён на пакеты `core`, `api`, `infra`. Какие преимущества даёт такая структура для разработки и поддержки проекта? Отметь все подходящие варианты.

- [ ] Улучшает читаемость и навигацию по проекту
- [ ] Позволяет переиспользовать модули в других частях приложения
- [ ] Уменьшает риск конфликтов имён между модулями из разных пакетов
- [ ] Упрощает процесс компиляции Python-кода в байт-код

### Вопрос 15
В проекте появился модуль `email.py`, и теперь импорт стандартного модуля `email` перестал работать. Как решить конфликт имён?

- [ ] Использовать относительный импорт для локального модуля: `from . import email`
- [ ] Использовать alias при импорте стандартного модуля: `import email as std_email`
- [ ] Переименовать свой модуль, чтобы не пересекаться со стандартной библиотекой
- [ ] Переместить локальный модуль в подпапку и использовать абсолютный импорт для стандартного модуля

### Вопрос 16
Бизнес-логика разделена со слоем API. Какие преимущества даёт такое разделение для разработки и поддержки проекта? Отметь все подходящие варианты.

- [ ] Упрощает переиспользование бизнес-логики в разных частях приложения
- [ ] Упрощает поддержку кода благодаря разделению ответственности между слоями
- [ ] Упрощает тестирование отдельных слоёв без необходимости поднимать всю систему
- [ ] Ускоряет выполнение программы за счёт оптимизации интерпретатором

### Вопрос 17
Какие шаги нужно выполнить в BotFather для создания нового бота? Отметь все подходящие варианты.

- [ ] Отправить `/newbot`
- [ ] Получить токен
- [ ] Указать имя и username
- [ ] Настроить описание бота и список команд

### Вопрос 18
После получения токена создан объект бота на `telebot`. Что нужно сделать, чтобы бот начал обрабатывать обновления?

- [ ] Вызвать `bot.polling()` для запуска бота
- [ ] Настроить webhook и указать URL сервера
- [ ] Зарегистрировать обработчики команд
- [ ] Отправить тестовое сообщение боту в Telegram

### Вопрос 19
Бот отвечает на команды, но не реагирует на текстовые сообщения. Что проверишь первым?

- [ ] Запущен ли бот через `bot.polling()`
- [ ] Корректно ли указан токен
- [ ] Не падает ли бот из-за исключения
- [ ] Зарегистрирован ли обработчик для текстовых сообщений

### Вопрос 20
Нужно отделить логику бота, работу с внешним API и хранилище. Как распределить модули?

- [ ] `bot/handlers.py` — команды, `services/api_client.py` — интеграции, `repositories/storage.py` — работа с данными
- [ ] `main.py` — команды, `utils.py` — интеграции и хранилище
- [ ] `handlers/commands.py` — команды, `handlers/messages.py` — текст, `handlers/api.py` — интеграции, `handlers/storage.py` — данные
- [ ] `bot.py` — команды и текст, `external.py` — интеграции и хранилище

### Вопрос 21
Пользователь нажал inline-кнопку, и нужно понять, какой шаг сценария он проходит. Как извлечь состояние?

**Ответ:**

_________________________________


### Вопрос 22
Нужно построить сценарий оплаты: выбрать товар → подтвердить → оплатить. Как хранить прогресс пользователя?

- [ ] Держать словарь `state[user_id] = "CONFIRM"` для отслеживания шага каждого пользователя
- [ ] Полагаться на историю сообщений в чате и анализировать их порядок
- [ ] Использовать временные переменные внутри обработчика без сохранения между запросами
- [ ] Хранить состояние только в `callback_data` без дополнительного хранилища

