# Теоретическая часть контрольной работы
## Вариант 2

**Дисциплина:** Разработка на Python. Углубленный

**Фамилия, Имя:** _________________________________

---

### Вопрос 1
При переходе к архитектуре «SPA + API» зачем разделять фронтенд и бэкенд? Отметь все подходящие причины.

- [ ] Чтобы использовать разные технологические стеки
- [ ] Чтобы масштабировать сервисы независимо
- [ ] Чтобы скрыть бизнес-логику на сервере
- [ ] Чтобы централизовать все внешние интеграции в одном месте

### Вопрос 2
Какие шаги необходимы для передачи данных в Jinja2-шаблон в FastAPI? Отметь все подходящие варианты.

- [ ] Передать данные через словарь в параметр `context`
- [ ] Оставить шаблон без данных — они подставятся автоматически
- [ ] Использовать глобальные переменные вместо контекста
- [ ] Вызвать `templates.TemplateResponse("report.html", {"request": request, "orders": orders})`

### Вопрос 3
Какие типы данных могут передаваться через HTML-формы по умолчанию? Отметь все подходящие варианты.

- [ ] JSON-объекты без дополнительной сериализации
- [ ] Файлы (с `multipart/form-data`)
- [ ] Текстовые строки
- [ ] Числовые значения

### Вопрос 4
Эндпоинт должен принимать query-параметр `priority` из URL `/tasks?priority=high`. Какие объявления параметра функции-обработчика подходят? Отметь все подходящие варианты.

- [ ] `def list_tasks(priority: str = Path(...))`
- [ ] `def list_tasks(priority: str = "/tasks?priority")`
- [ ] `def list_tasks(priority: str | None = None)`
- [ ] `def list_tasks(priority: str = Query(None))`

### Вопрос 5
В FastAPI добавлен обработчик:
```python
@app.exception_handler(HTTPException)
async def handler(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "trace": request.state.trace_id},
    )
```
Для чего используется такой обработчик?

- [ ] Чтобы централизованно форматировать ответы об ошибках и добавлять идентификатор запроса
- [ ] Чтобы скрывать все ошибки от клиента
- [ ] Чтобы логировать только успешные ответы
- [ ] Чтобы полностью отключить стандартные ответы FastAPI

### Вопрос 6
Эндпоинт FastAPI читает данные через `request.json()`, но клиент отправил запрос с заголовком `Content-Type: application/x-www-form-urlencoded`. Что вернёт FastAPI?

- [ ] Попытается парсить тело как JSON и вернёт ошибку парсинга
- [ ] Автоматически преобразует форму в JSON и продолжит обработку
- [ ] Автоматически переключится на чтение формы через `request.form()`
- [ ] Вернёт 422 или 400 из-за несоответствия формата тела

### Вопрос 7
Эндпоинт при любой ошибке возвращает статус 200 с сообщением «error». Какие изменения нужно внести, чтобы клиенты корректно обрабатывали разные сценарии? Отметь все подходящие варианты.

- [ ] Сохранять статус 200, чтобы фронтенд не показывал ошибки пользователю
- [ ] Включать в ответ структурированное сообщение об ошибке
- [ ] Документировать возможные HTTP-статусы, которые может вернуть эндпоинт
- [ ] Возвращать статусы 4xx для ошибок клиента и 5xx для ошибок сервера

### Вопрос 8
Эндпоинт `GET /items/{item_id}` объявлен с параметром `item_id: int`. Какой статус-код вернёт FastAPI, если клиент запросит `/items/apple`? Напиши число.

**Ответ:**

_________________________________


### Вопрос 9
Эндпоинт `POST /tasks` возвращает 500. Логи показывают ошибку сериализации. Какие шаги помогут подтвердить, что проблема в валидации входящих данных?

- [ ] Изменить HTTP-метод на GET
- [ ] Проверить схемы Pydantic и добавить валидацию входных данных
- [ ] Повторять запросы до успешного выполнения
- [ ] Перейти на формат XML вместо JSON
- [ ] Валидировать JSON-данные перед сохранением дополнительно

### Вопрос 10
API возвращает 500 из-за временной недоступности базы данных. Какие шаги помогут улучшить обработку ошибок и дать фронтенду понятную обратную связь? Отметь все подходящие варианты.

- [ ] Скрывать ошибку и возвращать статус 200
- [ ] Согласовать с фронтендом формат отображения ошибок пользователю
- [ ] Оставить статус 500 и возвращать пустое тело ответа
- [ ] Добавить обработчик исключений, возвращающий структурированный JSON и логирующий ошибку
- [ ] Возвращать статус 503 с сообщением о временной недоступности

### Вопрос 11
Эндпоинт `PUT /profiles/{id}` успешно обновил существующую запись без тела ответа. Какой статус-код подходит? Напиши число.

**Ответ:**

_________________________________


### Вопрос 12
Какие шаги необходимы для обеспечения корректной обработки JSON-ответов API клиентом? Отметь все подходящие варианты.

- [ ] Использовать единый формат тела ответа, например `{ "data": ... }`
- [ ] Документировать API-контракт в Swagger/OpenAPI
- [ ] Возвращать ошибки с описанием проблемных полей
- [ ] Указывать заголовок `Content-Type: application/json`
- [ ] Добавлять подробные логи сервера в тело ответа для отладки

### Вопрос 13
Назови три HTTP-метода, которые чаще всего используются для CRUD-операций. Напиши их через запятую.

**Ответ:**

_________________________________


### Вопрос 14
Какие задачи относятся к бэкенду в клиент-серверной архитектуре? Отметь все подходящие варианты.

- [ ] Хранение и обработка данных
- [ ] Генерация HTML на сервере для отправки клиенту
- [ ] Управление состоянием интерфейса на клиенте
- [ ] Авторизация и бизнес-логика

### Вопрос 15
Фронтенд получает `307 Temporary Redirect` на `/signin`. Что это значит?

- [ ] База данных недоступна
- [ ] Сессия истекла, и сервер просит авторизацию
- [ ] Сервер перезагружается
- [ ] Клиент стучится в неверный домен

### Вопрос 16
Какой код используется для подключения статических файлов в FastAPI?

- [ ] `app.static("/assets")`
- [ ] `app.mount("/assets", StaticFiles(directory="assets"), name="assets")`
- [ ] `app.serve_static("assets")`
- [ ] `app.include_router("/assets")`

### Вопрос 17
Клиент отправляет `POST https://api.bank.local/payments`, но сервер временно недоступен и возвращает ошибку соединения. Что должен сделать фронтенд для обработки этой ситуации?

- [ ] Повторять запрос с экспоненциальной задержкой до успеха
- [ ] Использовать закэшированные данные без уведомления пользователя
- [ ] Автоматически перезагрузить страницу через несколько секунд
- [ ] Сообщить пользователю об ошибке сети и предложить повторить позже

### Вопрос 18
Сервер не проверил данные формы и сохранил пустое поле `phone` в базу данных. Какие последствия возможны?

- [ ] Автоматическим заполнением поля через FastAPI
- [ ] Автоматической повторной отправкой формы браузером
- [ ] Ничего критического — пустая строка является валидным значением
- [ ] Некорректными данными в базе и ошибками при дальнейшей обработке

### Вопрос 19
В коде есть декоратор `@router.get("/health")`, но функция-обработчик отсутствует. Что произойдёт при запуске приложения?

- [ ] FastAPI подставит обработчик по умолчанию, возвращающий `{"message": "OK"}`
- [ ] Эндпоинт будет игнорироваться, запросы вернут 404
- [ ] FastAPI автоматически создаст обработчик, возвращающий пустой ответ
- [ ] Приложение упадёт с ошибкой при запуске

### Вопрос 20
Перед релизом API и фронтенд синхронизируют контракт. Как обеспечить стабильную интеграцию? Отметь все подходящие варианты.

- [ ] Поддерживать актуальную документацию
- [ ] Единую структуру ответов (`data`, `error`)
- [ ] Всегда возвращать 200 при ошибках
- [ ] Автоматизировать тесты (Postman, pytest) для критичных сценариев
- [ ] Логировать ошибки и добавлять request-id

### Вопрос 21
Какие шаги помогают организовать структуру проекта FastAPI для масштабирования? Отметь все подходящие варианты.

- [ ] Вынести логические группы эндпоинтов в отдельные модули и подключить их через `APIRouter`
- [ ] Хранить все обработчики в одном файле `main.py` для простоты навигации
- [ ] Настроить общие настройки приложения в отдельном модуле
- [ ] Использовать один роутер для всех эндпоинтов без группировки
- [ ] Разделить бизнес-логику, модели данных и вспомогательные функции по отдельным пакетам

### Вопрос 22
Какие три ключевых поля должны быть включены в структурированный JSON-ответ об ошибке? Напиши их через запятую.

**Ответ:**

_________________________________


### Вопрос 23
В Jinja2-шаблоне используется переменная `{{ total }}`, но она не передана в контекст. Что увидит пользователь на странице?

- [ ] FastAPI выбросит исключение при рендеринге шаблона
- [ ] В шаблоне отобразится текст `{{ total }}` как есть
- [ ] В месте подстановки переменной будет пустая строка
- [ ] Jinja2 автоматически подставит значение по умолчанию

### Вопрос 24
Зачем описывать API в контракте перед разработкой?

- [ ] Контракт нужен только на этапе разработки, не в продакшене
- [ ] Контракт описывает структуру базы данных для интеграции
- [ ] Контракт фиксирует формат запросов и ответов для всех клиентов
- [ ] Контракт определяет только методы аутентификации

### Вопрос 25
API вернул ответ:
```json
{
  "detail": [
    {"loc": ["query", "limit"], "msg": "value is not a valid integer"}
  ]
}
```
Что означает такой ответ?

- [ ] Ответ сгенерирован промежуточным прокси
- [ ] Ошибка сервера FastAPI
- [ ] Это HTML-страница
- [ ] Ошибка клиента (некорректные данные в запросе)

### Вопрос 26
Ниже лог HTTP-запроса:
```
POST /api/profile HTTP/1.1
Host: example.com
Content-Type: application/json
Content-Length: 42

{"email":"user@example.com","name":"Alex"}
```
Какие элементы запроса ты видишь? Отметь все подходящие варианты.

- [ ] Заголовки
- [ ] Метод
- [ ] Путь
- [ ] Тело

