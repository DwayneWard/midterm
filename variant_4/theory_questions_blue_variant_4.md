# Теоретическая часть контрольной работы. Вариант 4
## Разработка на Python. Основной

### Вопрос 1
Перед релизом ты сравниваешь ветку `feature/billing` с `main` и замечаешь, что твоя ветка отстаёт на три фикса. Как команда `git rebase origin/main` изменит историю `feature/billing`, если ты уже находишься в этой ветке?

А) Оставит историю без изменений  
Б) Перепишет твои коммиты поверх актуального `main`, формируя линейную историю  
В) Удалит все твои коммиты  
Г) Создаст merge-коммит

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как структурировать процесс разработки с помощью Git: зачем нужны ветки, почему важна история коммитов и как правильно использовать rebase для упорядочивания истории изменений (*).

### Вопрос 2
На фичевой ветке есть незакоммиченные правки. Как сохранить их временно, переключиться на `main`, а потом вернуть? Напиши последовательность команд.

**Правильный ответ:** `git stash`, `git switch main`, ... , `git switch feature`, `git stash pop` (принимаются эквивалентные комбинации)

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 3
В GitLab при создании Merge Request ты видишь, что ветка содержит коммит «fix typo», который можно объединить с предыдущим. Как быстро поправить сообщение последнего коммита перед публикацией MR?

А) `git commit --amend`  
Б) `git revert HEAD`  
В) `git reset --hard`  
Г) `git branch -m`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 4
Тебе нужно выяснить, кто в последний раз правил `README.md`. Какую команду используешь?

А) `git blame README.md`  
Б) `git bisect README.md`  
В) `git fetch README.md`  
Г) `git prune README.md`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 5
Команда переезжает на SSH. Какие шаги обязательны для нового ноутбука? Отметь все подходящие варианты.

А) Сгенерировать пару ключей `ssh-keygen`  
Б) Добавить публичный ключ в профиль GitLab  
В) Проверить соединение `ssh -T git@gitlab.com`  
Г) Опубликовать приватный ключ в README

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Почему использование SSH/токенов обеспечивает безопасность при работе с удалёнными репозиториями.

### Вопрос 6
Ты создаёшь новый репозиторий. Какие шаги помогут подготовить основную структуру? Отметь все подходящие варианты.

А) `git init`  
Б) Добавить `README.md` с описанием  
В) Создать `.gitignore` под используемые инструменты  
Г) Сразу удалить ветку `main`

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Роль GitLab как платформы для совместной работы, хранения и ревью кода.

### Вопрос 7
При `git push` ты получил ошибку `non-fast-forward`. Что это значит и как поступить?

А) Удалённая ветка содержит новые коммиты; нужно подтянуть их и решить конфликты  
Б) GitLab отключил доступ  
В) Репозиторий повреждён  
Г) Нужно сменить имя ветки

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Основные команды Git - инициализация, коммиты, создание веток, слияние, rebase(*) и базовые понятия работы с удалёнными репозиториями.

### Вопрос 8
Начинающий разработчик случайно закоммитил файл `secrets.env`. Как удалить файл из истории и предотвратить повторение? Отметь все подходящие шаги.

А) `git rm --cached secrets.env`  
Б) Добавить `secrets.env` в `.gitignore`  
В) Создать новый репозиторий  
Г) Добавить файл в README как пример

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Как структурировать процесс разработки с помощью Git: зачем нужны ветки, почему важна история коммитов и как правильно использовать rebase для упорядочивания истории изменений (*).

### Вопрос 9
Ты проектируешь REST-эндпоинт для создания заявки. Какой статус отправить при успешном создании ресурса?

А) 200  
Б) 201  
В) 204  
Г) 500

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные методы HTTP (GET, POST, PUT, DELETE) и значение статус-кодов в коммуникации клиент-сервер.

### Вопрос 10
Система мониторинга жалуется на частые `400 Bad Request` при `POST /api/payments`. Какие гипотезы проверишь в первую очередь? Отметь все подходящие варианты.

А) Неверное тело запроса или отсутсвие обязательных полей  
Б) Неправильные заголовки или Content-Type  
В) Ошибки валидации на сервере  
Г) Сервер недоступен из-за сети

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Важность корректного использования статус-кодов для обработки ошибок и успешных операций.

### Вопрос 11
Тебе нужно спроектировать маршрут для получения конкретного заказа в REST API. Какой URI и метод соответствуют REST?

А) GET `/api/orders/{order_id}`  
Б) POST `/api/orders/get`  
В) PUT `/api/orders/{order_id}`  
Г) DELETE `/api/orders/{order_id}/info`

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Почему выбор конкретного HTTP-метода соответствует определённой операции.

### Вопрос 12
Какие элементы обязательно присутствуют в HTTP-запросе? Отметь все подходящие варианты.

А) Метод и путь  
Б) Заголовки (минимум Host)  
В) Тело при необходимости  
Г) Случайный UUID

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Различия между запросом к серверу и ответом, а также структуру типичного REST-запроса и ответа.

### Вопрос 13
Postman показал `504 Gateway Timeout` на запрос к твоему сервису. Что означает этот код?

А) Клиент отправил неправильный формат  
Б) Промежуточный сервер не дождался ответа от бэкенда  
В) Всё прошло успешно  
Г) Ресурс удалён

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 14
Сервис аналитики требует авторизованный запрос, чтобы получить вторую страницу отчёта. Сформируй строку на `requests`, которая передаст `page=2` и заголовок `Authorization: Bearer TOKEN`.

**Правильный ответ:** `requests.get(url, params={"page": 2}, headers={"Authorization": "Bearer TOKEN"})`

**Проверяемый ОР:** Понимает. - Как правильно формировать GET и POST запросы, передавать параметры и обрабатывать ошибки (например, таймауты или неверные статус-коды).

### Вопрос 15
Как корректно обработать ситуацию, если `requests.get` вернул ответ без ожидаемого JSON и выбросил `JSONDecodeError`? Отметь все подходящие варианты.

А) Проверить заголовок `Content-Type`  
Б) Логировать тело ответа для диагностики  
В) Обернуть парсинг в try/except и показать понятное сообщение  
Г) Игнорировать ошибку

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Логику обработки ошибок при запросах и как корректная обработка может предотвратить сбои в работе приложения.

### Вопрос 16
Ты отправляешь POST-запрос: `requests.post(url, json={"name": "Anna"})`. Как получить текст ответа и статус-код? Напиши выражение.

**Правильный ответ:** `response = requests.post(...); print(response.status_code, response.text)` (принимаются эквиваленты)

**Проверяемый ОР:** Понимает. - Как правильно формировать GET и POST запросы, передавать параметры и обрабатывать ошибки (например, таймауты или неверные статус-коды).

### Вопрос 17
API вернул:
```json
{"user": {"profile": {"emails": ["work@example.com", "home@example.com"]}}}
```
Как получить значение `"home@example.com"` из словаря `data`?

**Правильный ответ:** `data["user"]["profile"]["emails"][1]`

**Проверяемый ОР:** Понимает. - Почему JSON является предпочтительным форматом обмена данными в веб-разработке, и как вложенные структуры JSON отображаются в Python.

### Вопрос 18
Какие преимущества JSON важны для интеграций? Отметь все подходящие варианты.

А) Читаемый текстовый формат  
Б) Поддержка в браузерах и Python «из коробки»  
В) Возможность описывать вложенные структуры  
Г) Автоматическое шифрование данных

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Формат JSON: парсинг, сериализация, вложенные структуры.

### Вопрос 19
Перед отправкой данных нужно сериализовать объект, содержащий дату. Как избежать ошибки `TypeError: Object of type date is not JSON serializable`? Отметь все подходящие решения.

А) Преобразовать дату в строку через `isoformat()`  
Б) Передавать строку с форматом `YYYY-MM-DD`  
В) Использовать кастомный `default` в `json.dumps`  
Г) Записать дату в комментарий

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Методы сериализации и парсинга JSON в объекты Python.

### Вопрос 20
Нужно выполнить повтор запроса при таймауте, но ограничить количество попыток тремя. Приведи краткий пример цикла, который реализует эту логику.

**Правильный ответ:**
```python
for attempt in range(3):
    try:
        response = requests.get(url, timeout=3)
        break
    except requests.Timeout:
        if attempt == 2:
            print("Истек таймаут, прекращаю")
            exit(1)
```
(принимаются эквиваленты с подсчётом попыток)

**Проверяемый ОР:** Понимает. - Логику обработки ошибок при запросах и как корректная обработка может предотвратить сбои в работе приложения.

### Вопрос 21
После рефакторинга `utils.py` и `api.py` начали импортировать друг друга. Чем опасны такие циклы?

А) Модули могут загрузиться частично и вызывать `ImportError`  
Б) Код выполняется в неправильном порядке  
В) Интерпретатор зацикливается и падает  
Г) Нет опасности, Python всё разрулит

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как возникновение циклических импортов влияет на выполнение программы и как их избежать посредством правильного проектирования.

### Вопрос 22
Как избежать конфликтов имён модулей, если в проекте есть файл `email.py`, а ты хочешь использовать стандартный модуль `email`?

А) Переименовать свой файл  
Б) Полностью удалить стандартный модуль  
В) Импортировать через абсолютный путь к стандартной библиотеке  
Г) Вынести код в пакет `core/`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Проблемы, связанные с конфликтами имён при импорте и циклическими зависимостями между модулями.

### Вопрос 23
Проект делят на пакеты `controllers`, `services`, `repositories`. Какие преимущества даёт такая структура? Отметь все подходящие варианты.

А) Упрощает тестирование отдельных слоёв  
Б) Позволяет переиспользовать бизнес-логику  
В) Делает код понятнее для новых коллег  
Г) Ускоряет интерпретатор

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Роль ясного разделения логики приложения для обеспечения масштабируемости и облегчения поддержки проекта.

### Вопрос 24
На планировании релиза команда решает, стоит ли дробить монолит на отдельные модули. Назови три преимущества модульного подхода для сопровождения проекта. Напиши через запятую.

**Правильный ответ:** «меньше взаимозависимостей, легче тестировать, проще расширять» (принимаются близкие формулировки)

**Проверяемый ОР:** Знает. - Что такое модульность и как разделение кода на логические блоки способствует его поддержке и тестированию.

### Вопрос 25
Ты создаёшь Telegram-бота для поддержки пользователей. Какие действия выполняешь в BotFather? Отметь все подходящие варианты.

А) /newbot  
Б) Придумать имя и username  
В) Получить токен  
Г) Включить режим вебхуков по умолчанию

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Как создать Telegram-бота через BotFather и получить токен для работы.

### Вопрос 26
После получения токена ты настраиваешь приложение на `python-telegram-bot`. Что нужно сделать, чтобы бот начал отвечать?

А) Создать `Application` и вызвать `application.run_polling()`  
Б) Вставить токен в README  
В) Запустить локальный сервер без кода  
Г) Отправить сообщение самому себе

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как Telegram Bot API обеспечивает связь между пользователем и сервером, и почему важно правильно настроить обработку команд.

### Вопрос 27
Бот должен отвечать на команды `/start` и `/help`, а также реагировать на произвольный текст. Какие обработчики зарегистрируешь?

А) `CommandHandler("start", ...)`, `CommandHandler("help", ...)`, `MessageHandler(filters.TEXT, ...)`  
Б) Один `MessageHandler` на все случаи  
В) Обработчик только на `/start`  
Г) Никаких обработчиков не нужно

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как Telegram Bot API обеспечивает связь между пользователем и сервером, и почему важно правильно настроить обработку команд.

### Вопрос 28
Код бота разрастается. Как разделить ответственность по модулям? Отметь все подходящие варианты.

А) Вынести логику команд в `handlers/commands.py`  
Б) Хранить доступ к внешнему API в `services/api_client.py`  
В) Собрать конфигурацию в `config.py`  
Г) Все функции разместить в `bot.py`

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Роль библиотек, упрощающих интеграцию с Telegram, и как они структурируют работу бота.

### Вопрос 29
Пользователь вводит одно и то же сообщение много раз, а бот должен предлагать заготовленные варианты. Какие интерфейсы Telegram помогут?

А) Reply-клавиатура для часто используемых действий  
Б) Inline-кнопки для контекстных ответов  
В) GIF-стикеры  
Г) Тематические хэштеги

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Что такое inline-кнопки и клавиатуры в Telegram-ботах и для чего они используются.

### Вопрос 30
Пользователь нажал inline-кнопку «Продлить подписку». Как обработать событие на стороне бота?

А) Получить `callback_query` и прочитать `callback_data`  
Б) Ожидать новое текстовое сообщение  
В) Спрашивать пользователя вручную  
Г) Игнорировать нажатие

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Принципы работы callback-запросов: как бот получает данные от нажатых кнопок и как обрабатываются такие запросы.

### Вопрос 31
Нужно построить многошаговый сценарий: выбрать услугу → указать дату → подтвердить. Как сохранять состояние пользователя?

А) Держать словарь `state[chat_id] = step`  
Б) Полагаться на историю сообщений  
В) Всегда начинать заново  
Г) Хранить состояние в README

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Логику обработки callback-запросов для реализации многошаговых сценариев диалога, в том числе управление состоянием бота.

### Вопрос 32
Какие преимущества дают inline-кнопки для UX? Отметь все подходящие варианты.

А) Быстрее выбор действия  
Б) Меньше опечаток  
В) Можно передавать данные для обработки на сервере  
Г) Не требуют токена

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Понимает. - Как интерактивные элементы (inline-кнопки, клавиатуры) улучшают пользовательский опыт, делая взаимодействие с ботом более динамичным.

### Вопрос 33
API бота возвращает ошибку. Приведи пример JSON-ответа с тремя ключами, чтобы фронтенд мог корректно показать сообщение пользователю.

**Правильный ответ:** `{"code": "PAYMENT_FAILED", "message": "Оплата не прошла", "details": {"retry_after": 300}}` (принимаются варианты с аналогичными ключами)

**Проверяемый ОР:** Понимает. - Важность корректного использования статус-кодов для обработки ошибок и успешных операций.

### Вопрос 34
Зачем документировать REST API (например, через Swagger или Markdown)? Назови три причины.

**Правильный ответ:** «ускоряет подключение интеграций, упрощает ревью контрактов, снижает количество ошибок при разработке фронтенда» (принимаются эквивалентные формулировки)

**Проверяемый ОР:** Понимает. - Как REST API стандартизирует структуру URL, методы HTTP, заголовки, тело запроса и ответа, облегчая интеграцию различных систем.

