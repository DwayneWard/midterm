# Теоретическая часть контрольной работы. Вариант 3
## Разработка на Python. Углублённый

### Вопрос 1
Фронтенд вызывает `GET /api/dashboard`, но сервер ответил `504 Gateway Timeout`. Что должен увидеть пользователь?

А) Старые данные из кэша без уведомлений  
Б) Сообщение о тайм-ауте и возможность повторить запрос  
В) Автоматический переход на другую страницу  
Г) Ничего, UI должен молча ждать

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 2
Менеджер спрашивает, за что отвечает бэкенд в архитектуре «SPA + API». Отметь все подходящие варианты.

А) Хранение данных и бизнес-логика  
Б) Анимации и CSS  
В) Авторизация и проверки  
Г) Разметка интерфейса в браузере

**Правильные ответы:** А, В

**Проверяемый ОР:** Знает. - Различие между фронтендом и бэкендом, их задачи и роли.

### Вопрос 3
Компания переводит продукт на микросервисы. Почему стоит разделить фронт и бэк?

А) Чтобы внедрять разные стеки и масштабировать их независимо  
Б) Чтобы уменьшить количество HTTP-запросов  
В) Чтобы держать бизнес-правила на сервере  
Г) Чтобы хранить данные только в браузере

**Правильные ответы:** А, В

**Проверяемый ОР:** Понимает. - Почему важно разделение фронтенда и бэкенда в современных приложениях.

### Вопрос 4
Разработчик забыл, что входит в HTTP-запрос. Какие части перечислишь? Отметь все подходящие варианты.

А) Метод  
Б) Путь или URL  
В) Заголовки  
Г) Тело

**Правильные ответы:** А, Б, В, Г

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 5
На встрече обсуждают новый API. Зачем фиксировать контракт?

А) Чтобы фронт и бэк говорили на одном языке запросов и ответов  
Б) Чтобы заменить базу данных  
В) Чтобы API работал только в браузере  
Г) Чтобы не писать тесты

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

### Вопрос 6
Назови три HTTP-метода, которые чаще всего используются для изменения данных. Напиши через запятую.

**Правильный ответ:** `POST, PUT, PATCH` (принимаются сочетания с `DELETE`)

**Проверяемый ОР:** Знает. - Основные компоненты HTTP-запросов и ответов (методы, заголовки, тело запроса, коды ответов).

### Вопрос 7
Команды фронта и бэка синхронизируют новый релиз API. Что обязательно обсудить? Отметь все подходящие варианты.

А) Формат запросов, ответов и ошибок  
Б) Как совместно использовать базу данных, минуя API  
В) Правила версионирования  
Г) Способы логирования и метрики ошибок

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Знает. - Основную роль API в клиент-серверном взаимодействии.

### Вопрос 8
Вы разворачиваете проект на FastAPI через pip. Как установить зависимости?

**Правильный ответ:** `pip install fastapi "uvicorn[standard]"` (принимаются варианты с раздельной установкой)

**Проверяемый ОР:** Знает. - Как устанавливать и запускать FastAPI.

### Вопрос 9
При ревью заметили код:
```python
api_router = APIRouter()
api_router.post("/sync")
```
Функцию не добавили. Что произойдёт?

А) FastAPI создаст обработчик автоматически  
Б) Приложение упадёт при старте  
В) Эндпоинт возвратит пустой JSON  
Г) FastAPI проигнорирует декоратор

**Правильный ответ:** Б

**Проверяемый ОР:** Знает. - Основные концепции маршрутизации (GET, POST).

### Вопрос 10
Нужно добавить фильтр `region` как query-параметр. Какие сигнатуры подойдут? Отметь все подходящие варианты.

А) `def list_regions(region: str | None = None)`  
Б) `def list_regions(region: str = Query(default=None))`  
В) `def list_regions(region: str = Path(...))`  
Г) `def list_regions(region: Request)`

**Правильные ответы:** А, Б

**Проверяемый ОР:** Понимает. - Разницу между query и path parameters и их назначение.

### Вопрос 11
Эндпоинт `@app.get("/catalog/{item_id}")` объявлен с типом `item_id: int`. Какой статус вернёт FastAPI на `/catalog/book`? Напиши число.

**Правильный ответ:** `422`

**Проверяемый ОР:** Понимает. - Как обрабатывать запросы и возвращать ответы.

### Вопрос 12
Какой URL откроешь, чтобы посмотреть Swagger UI в FastAPI? Напиши путь.

**Правильный ответ:** `/docs`

**Проверяемый ОР:** Знает. - Как FastAPI генерирует документацию API (Swagger, Redoc).

### Вопрос 13
Проект растёт, и нужно поддерживать читаемую структуру FastAPI-приложения. Какие шаги помогут? Отметь все подходящие варианты.

А) Разнести эндпоинты по модулям и подключать через `APIRouter`  
Б) Вынести бизнес-логику и модели в отдельные пакеты  
В) Держать весь код в одном `main.py`  
Г) Настроить общее конфигурирование приложения отдельно  
Д) Создать модуль на каждый HTTP-метод

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как организовать структуру проекта на FastAPI.

### Вопрос 14
Команда оформляет ресурс `tickets`. Подбери пары «операция → метод». Отметь все подходящие соответствия.

А) Создать билет → POST  
Б) Получить билет → GET  
В) Частично обновить билет → PATCH  
Г) Полностью обновить билет → PUT  
Д) Удалить билет → DELETE  
Е) Запросить список билетов → TRACE

**Правильные ответы:** А, Б, В, Г, Д

**Проверяемый ОР:** Знает. - Принципы реализации CRUD-операций в рамках REST API.

### Вопрос 15
Фронтенд послал форму (`application/x-www-form-urlencoded`), а сервер пытается выполнить `await request.json()`. Как отреагирует FastAPI?

А) Автоматически конвертирует форму в JSON  
Б) Вернёт 422/400 из-за неверного формата  
В) Проигнорирует тело  
Г) Преобразует запрос в GET

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как обрабатывать входящие данные в FastAPI.

### Вопрос 16
Перед релизом JSON API для аналитики вы обсуждаете контракт с фронтендом. Что важно соблюдать? Отметь все подходящие варианты.

А) Явно указывать `Content-Type: application/json`  
Б) Использовать единый формат ответа (например, `{ "result": ... }`)  
В) Записывать сырые SQL-логи прямо в ответ  
Г) Документировать контракт  
Д) Возвращать ошибки с указанием полей

**Правильные ответы:** А, Б, Г, Д

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 17
Фронтенд отправляет `POST /tasks` и получает 500 на проде. Логи показывают ошибку сериализации при работе с базой. Как подтвердить, что проблема именно в валидации данных? Отметь все подходящие варианты.

А) Повторять запросы, пока не пройдет  
Б) Проверить схемы Pydantic и добавить валидацию входа  
В) Логировать тело запроса с указанием некорректных полей  
Г) Перевести метод на GET  
Д) Возвращаться к XML

**Правильные ответы:** Б, В

**Проверяемый ОР:** Понимает. - Как реализовать API, взаимодействующее с фронтендом.

### Вопрос 18
Ты реализовал `PUT /clients/{id}`. Обновление прошло успешно, тело ответа пустое. Какой статус отправишь? Напиши число.

**Правильный ответ:** `204`

**Проверяемый ОР:** Знает. - Принципы валидации данных в API.

### Вопрос 19
Нужно отрендерить `dashboard.html` с данными `metrics`. Какие шаги обязательны? Отметь все подходящие варианты.

А) Вызвать `TemplateResponse("dashboard.html", {"request": request, "metrics": metrics})`  
Б) Передать данные словарём  
В) Использовать глобальную переменную  
Г) Убрать `request` из контекста

**Правильные ответы:** А, Б

**Проверяемый ОР:** Знает. - Основы работы с Jinja2 в FastAPI: передача данных, использование циклов и условий.

### Вопрос 20
Как подключить статику из папки `public` к приложению FastAPI?

А) `app.mount("/public", StaticFiles(directory="public"), name="public")`  
Б) `app.static("/public")`  
В) `app.include_router("/public")`  
Г) `app.serve_static("public")`

**Правильный ответ:** А

**Проверяемый ОР:** Знает. - Различия между статическими файлами и шаблонами, способы их подключения в FastAPI.

### Вопрос 21
В шаблоне `{{ total_orders }}`, но переменную не передали. Что увидит пользователь?

А) Приложение упадёт  
Б) На странице будет пусто  
В) Появится текст `{{ total_orders }}`  
Г) Значение заполнится нулём

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как передавать данные в шаблоны через Jinja2.

### Вопрос 22
Форма отправляет данные, но `phone` пустой и сервер это принимает. Чего ожидать?

А) Ничего, пустая строка допустима  
Б) Некорректной аналитики и багов в дальнейшем  
В) FastAPI автоматически заполнит поле  
Г) Браузер переотправит данные с корректным номером

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как корректная обработка данных из форм улучшает взаимодействие пользователя с приложением и повышает безопасность.

### Вопрос 23
Какие типы данных поддерживаются HTML-формой «из коробки»? Отметь все подходящие варианты.

А) Текст  
Б) Числа  
В) Файлы  
Г) JSON без сериализации

**Правильные ответы:** А, Б, В

**Проверяемый ОР:** Знает. - Какие типы данных могут передаваться через формы.

### Вопрос 24
На тестовой среде пользователь видит `500 Internal Server Error`, потому что поле `amount` не перевелось в число. Какие шаги помогут исправить ситуацию?

А) Спрятать поле `amount`  
Б) Добавить серверную валидацию  
В) Заменить POST на GET  
Г) Вернуть понятное сообщение об ошибке  
Д) Игнорировать ошибку и вернуть 200

**Правильные ответы:** Б, Г

**Проверяемый ОР:** Понимает. - Почему важно проводить валидацию и фильтрацию пользовательского ввода для защиты серверной логики и данных.

### Вопрос 25
Как сделать взаимодействие API и фронта устойчивым? Отметь все подходящие варианты.

А) Возвращать единый формат `{ "data": ..., "error": ... }`  
Б) Согласовывать изменения API в документации  
В) Всегда возвращать 200  
Г) Автоматизировать тесты (Postman, pytest)  
Д) Логировать ошибки и добавлять request-id

**Правильные ответы:** А, В, Г

**Проверяемый ОР:** Понимает. - Как организовать эндпоинты для CRUD-операций и поддерживать согласованность API с фронтендом.

### Вопрос 26
Какой статус отправишь, если запрошенный `shipment_id` не найден? Напиши число.

**Правильный ответ:** `404`

**Проверяемый ОР:** Знает. - Какие бывают типы ошибок в API (400, 404, 500 и др.).

### Вопрос 27
Чтобы фронтенд мог обрабатывать ошибки одинаково, API должно возвращать понятный JSON. Назови три поля, которые включишь. Напиши их через запятую.

**Правильный ответ:** `code, message, details` (принимаются синонимы вроде `status`, `error`, `info`)

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 28
Если база лежит и API шлёт 500, как улучшить поведение сервиса? Отметь все подходящие варианты.

А) Добавляем `exception_handler`, возвращающий JSON и логирующий ошибку  
Б) Оставляем 500 без тела  
В) Возвращаем 503 и описываем проблему  
Г) Прячем ошибку и возвращаем 200  
Д) Согласовываем отображение с фронтом

**Правильные ответы:** А, В, Д

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 29
Postman возвращает:
```json
{
  "detail": [
    {"loc": ["query", "offset"], "msg": "value is not a valid integer"}
  ]
}
```
Это значит, что…

А) Клиент передал неверный query-параметр  
Б) Сервер сломался  
В) Прокси поменял ответ  
Г) Это HTML-страница

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как на клиенте различать ошибки сервера (500) и ошибки клиента (400).

### Вопрос 30
Разработчик добавил обработчик:
```python
@app.exception_handler(HTTPException)
async def handle_http(request, exc):
    return JSONResponse(
        status_code=exc.status_code,
        content={"error": exc.detail, "trace": request.state.trace_id},
    )
```
Зачем это делает команда?

А) Чтобы единообразно оформлять ошибки и собирать trace-id  
Б) Чтобы скрыть ошибки  
В) Чтобы логировать только удачные операции  
Г) Чтобы обойти FastAPI

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Как кастомные обработчики ошибок помогают улучшить стабильность API.

### Вопрос 31
Фронтенд получает `302` на `/auth/login`. Что происходит?

А) Пользователь стучится на неверный домен  
Б) Сессия истекла, и сервер просит авторизацию  
В) Сервер перезапускается  
Г) База данных упала

**Правильный ответ:** Б

**Проверяемый ОР:** Понимает. - Как клиент и сервер взаимодействуют через HTTP-запросы и ответы.

### Вопрос 32
Фронтенд не обрабатывает 422 Validation Error. Что посоветуешь?

А) Продолжать игнорировать 422  
Б) Перенаправлять пользователя на главную  
В) Показать ошибки валидации и дать исправить данные  
Г) Сменить метод на PUT

**Правильный ответ:** В

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 33
Некорректный эндпоинт всегда возвращает 200 с сообщением «error». Какие шаги нужно предпринять? Отметь все подходящие варианты.

А) Возвращать корректные статусы 4xx/5xx  
Б) Добавлять понятные описания ошибок  
В) Продолжать отвечать 200  
Г) Зафиксировать возможные статусы в документации

**Правильные ответы:** А, Б, Г

**Проверяемый ОР:** Понимает. - Как корректно обрабатывать ошибки в API.

### Вопрос 34
Фронтенд ожидает `{ "orders": [...] }`, а API отправляет `{ "items": [...] }`. Чем это грозит?

А) Клиент покажет ошибку, потому что не найдёт нужное поле  
Б) Браузер сам переименует ключ  
В) Сервер подстроится под клиента  
Г) Ошибка исчезнет после перезагрузки страницы

**Правильный ответ:** А

**Проверяемый ОР:** Понимает. - Роль API в обмене данными между клиентом и сервером.

